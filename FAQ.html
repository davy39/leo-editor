<!--@+leo-ver=5-thin-->
<!--@+node:davy.20141209091210.28: * @file sources/templates/layout.html-->
<!--@+at-->
<!--
This Jinja2 template introduce an extrahead block so we can add extra javascript for flattr.
-->
<!--@@c-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FAQ &mdash; Leo 5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/leo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Leo 5.0 documentation" href="index.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="leo.core.leoApp.LeoApp.createDefaultGui" href="apidoc/leo.core.leoApp.LeoApp.createDefaultGui.html" />
    <script type="text/javascript">
        (function() {
            var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
            s.type = 'text/javascript';
            s.async = true;
            s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
            t.parentNode.insertBefore(s, t);
        })();
    </script>
     

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="apidoc/leo.core.leoApp.LeoApp.createDefaultGui.html" title="leo.core.leoApp.LeoApp.createDefaultGui"
             accesskey="P">previous</a> |</li>
        <li><a href="contents.html">Leo 5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="faq">
<h1><a class="toc-backref" href="#id3">FAQ</a><a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h1>
<p>This is Leo&#8217;s Frequently Asked Questions document.</p>
<div class="contents topic" id="contents">
<span id="index-0"></span><p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#faq" id="id3">FAQ</a><ul>
<li><a class="reference internal" href="#customizing-leo" id="id4">Customizing Leo</a><ul>
<li><a class="reference internal" href="#how-can-i-add-support-for-a-new-language" id="id5">How can I add support for a new language?</a></li>
<li><a class="reference internal" href="#how-can-i-create-a-pane-for-matplotlib-charts" id="id6">How can I create a pane for matplotlib charts?</a></li>
<li><a class="reference internal" href="#how-can-i-enable-and-disable-support-for-psyco" id="id7">How can I enable and disable support for psyco?</a></li>
<li><a class="reference internal" href="#how-can-i-put-background-images-in-the-body-pane" id="id8">How can I put background images in the body pane?</a></li>
<li><a class="reference internal" href="#how-can-i-use-leo-s-legacy-key-bindings" id="id9">How can I use Leo&#8217;s legacy key bindings?</a></li>
<li><a class="reference internal" href="#how-do-i-add-a-new-menu-item-from-a-plugin" id="id10">How do I add a new menu item from a plugin?</a></li>
<li><a class="reference internal" href="#how-do-i-set-selection-colors" id="id11">How do I set selection colors?</a></li>
<li><a class="reference internal" href="#how-do-i-specify-qt-fonts" id="id12">How do I specify qt fonts?</a></li>
<li><a class="reference internal" href="#how-do-i-submit-a-plugin" id="id13">How do I submit a plugin?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-leo" id="id14">Getting Leo</a><ul>
<li><a class="reference internal" href="#where-can-i-get-official-releases-of-leo" id="id15">Where can I get official releases of Leo?</a></li>
<li><a class="reference internal" href="#how-do-i-use-git-to-get-the-latest-sources-from-leo-s-github-site" id="id16">How do I use git to get the latest sources from Leo&#8217;s GitHub site?</a></li>
<li><a class="reference internal" href="#how-can-i-get-recent-snapshots-of-leo" id="id17">How can I get recent snapshots of Leo?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-leo" id="id18">Installing Leo</a><ul>
<li><a class="reference internal" href="#leo-s-installer-failed-what-do-i-do" id="id19">Leo&#8217;s installer failed, what do I do?</a></li>
<li><a class="reference internal" href="#nothing-or-almost-nothing-happens-when-i-start-leo-what-should-i-do" id="id20">Nothing (or almost nothing) happens when I start Leo.  What should I do?</a></li>
<li><a class="reference internal" href="#running-python-setup-py-install-from-the-leo-directory-doesn-t-work-why-not" id="id21">Running Python setup.py install from the leo directory doesn&#8217;t work.  Why not?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#learning-to-use-leo" id="id22">Learning to use Leo</a><ul>
<li><a class="reference internal" href="#what-s-the-best-way-to-learn-to-use-leo" id="id23">What&#8217;s the best way to learn to use Leo?</a></li>
<li><a class="reference internal" href="#why-should-i-use-clones" id="id24">Why should I use clones?</a></li>
<li><a class="reference internal" href="#how-does-ekr-use-clones" id="id25">How does EKR use clones?</a></li>
<li><a class="reference internal" href="#when-is-using-a-section-better-than-using-a-method" id="id26">When is using a section better than using a method?</a></li>
<li><a class="reference internal" href="#when-is-deleting-a-node-dangerous" id="id27">When is deleting a node dangerous?</a></li>
<li><a class="reference internal" href="#why-doesn-t-leo-support-cross-file-clones" id="id28">Why doesn&#8217;t Leo support cross-file clones?</a></li>
<li><a class="reference internal" href="#how-does-ekr-leo-s-developer-use-leo" id="id29">How does EKR (Leo&#8217;s developer) use Leo?</a></li>
<li><a class="reference internal" href="#how-does-leo-handle-clone-conflicts" id="id30">How does Leo handle clone conflicts?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#leo-in-shared-environments" id="id31">Leo in Shared environments</a><ul>
<li><a class="reference internal" href="#how-should-i-use-leo-with-bzr-git-hg-svn-cvs" id="id32">How should I use Leo with bzr/git/hg/svn/cvs?</a></li>
<li><a class="reference internal" href="#how-can-i-use-leo-cooperatively-without-sentinels" id="id33">How can I use Leo cooperatively without sentinels?</a></li>
<li><a class="reference internal" href="#what-s-the-recommended-way-to-upgrade-leo" id="id34">What&#8217;s the recommended way to upgrade Leo?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scipting-testing" id="id35">Scipting &amp; Testing</a><ul>
<li><a class="reference internal" href="#how-can-i-create-buttons-with-dropdown-menus" id="id36">How can I create buttons with dropdown menus?</a></li>
<li><a class="reference internal" href="#how-can-i-make-commonly-used-scripts-widely-accessible" id="id37">How can I make commonly-used scripts widely accessible?</a></li>
<li><a class="reference internal" href="#how-can-i-test-settings-easily" id="id38">How can I test settings easily?</a></li>
<li><a class="reference internal" href="#how-can-i-use-setuptools-instead-of-bat-files" id="id39">How can I use setuptools instead of .bat files?</a></li>
<li><a class="reference internal" href="#how-can-scripts-call-functions-from-leo-s-core" id="id40">How can scripts call functions from Leo&#8217;s core?</a></li>
<li><a class="reference internal" href="#how-do-i-run-unit-tests-from-leo" id="id41">How do I run unit tests from Leo?</a></li>
<li><a class="reference internal" href="#how-to-use-leo-to-make-mathematical-notes" id="id42">How to use leo to make mathematical notes?</a></li>
<li><a class="reference internal" href="#what-is-an-easy-way-to-profile-code" id="id43">What is an easy way to profile code?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tips-and-techniques" id="id44">Tips and techniques</a><ul>
<li><a class="reference internal" href="#how-can-i-create-a-template-leo-file" id="id45">How can I create a template .leo file?</a></li>
<li><a class="reference internal" href="#how-can-i-display-graphics-in-leo" id="id46">How can I display graphics in Leo?</a></li>
<li><a class="reference internal" href="#how-can-i-import-many-files-at-once" id="id47">How can I import many files at once?</a></li>
<li><a class="reference internal" href="#how-can-i-restore-focus-without-using-the-mouse" id="id48">How can I restore focus without using the mouse</a></li>
<li><a class="reference internal" href="#how-can-i-show-leo-files-with-excel" id="id49">How can I show Leo files with Excel?</a></li>
<li><a class="reference internal" href="#how-can-i-specify-the-root-directory-of-a-thumb-drive" id="id50">How can I specify the root directory of a thumb drive?</a></li>
<li><a class="reference internal" href="#how-can-i-use-bibtex-citations-from-leo" id="id51">How can I use BibTeX citations from Leo?</a></li>
<li><a class="reference internal" href="#how-can-i-use-bzr-git-to-check-leo-s-importers" id="id52">How can I use bzr/git to check Leo&#8217;s importers?</a></li>
<li><a class="reference internal" href="#how-can-i-use-leo-to-develop-leo-itself" id="id53">How can I use Leo to develop Leo itself?</a></li>
<li><a class="reference internal" href="#how-can-i-use-the-gtd-workflow-in-leo" id="id54">How can I use the GTD workflow in Leo?</a></li>
<li><a class="reference internal" href="#how-can-i-use-two-copies-of-leo-to-advantage" id="id55">How can I use two copies of Leo to advantage?</a></li>
<li><a class="reference internal" href="#how-to-make-a-screencast" id="id56">How to make a screencast</a><ul>
<li><a class="reference internal" href="#use-a-script-to-open-your-app" id="id57">Use a script to open your app</a></li>
<li><a class="reference internal" href="#debug-your-workflow-with-short-videos" id="id58">Debug your workflow with short videos</a></li>
<li><a class="reference internal" href="#emulate-the-screencast-com-tutorials" id="id59">Emulate the screencast.com tutorials</a></li>
<li><a class="reference internal" href="#record-your-first-real-take" id="id60">Record your first real take</a></li>
<li><a class="reference internal" href="#edit-your-raw-take" id="id61">Edit your raw take</a></li>
<li><a class="reference internal" href="#summary" id="id62">Summary</a></li>
<li><a class="reference internal" href="#additional-tips" id="id63">Additional tips</a></li>
<li><a class="reference internal" href="#tips-for-improving-audio" id="id64">Tips for improving audio</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#trouble-shooting" id="id65">Trouble shooting</a><ul>
<li><a class="reference internal" href="#how-do-i-get-help" id="id66">How do I get help?</a></li>
<li><a class="reference internal" href="#how-do-i-report-bugs" id="id67">How do I report bugs?</a></li>
<li><a class="reference internal" href="#my-old-leo-files-won-t-load-using-leo-4-5-or-later-what-should-i-do" id="id68">My old .leo files won&#8217;t load using Leo 4.5 or later. What should I do?</a></li>
<li><a class="reference internal" href="#error-messages-from-the-rst3-plugin-aren-t-helpful-what-can-i-do" id="id69">Error messages from the rst3 plugin aren&#8217;t helpful. What can I do?</a></li>
<li><a class="reference internal" href="#how-can-i-run-leo-from-a-console-window" id="id70">How can I run Leo from a console window?</a></li>
<li><a class="reference internal" href="#how-can-i-use-python-s-pdb-debugger-with-leo" id="id71">How can I use Python&#8217;s pdb debugger with Leo?</a></li>
<li><a class="reference internal" href="#i-can-t-write-imported-files-what-s-going-on" id="id72">I can&#8217;t write Imported files.  What&#8217;s going on?</a></li>
<li><a class="reference internal" href="#id1" id="id73">Nothing (or almost nothing) happens when I start Leo.  What should I do?</a></li>
<li><a class="reference internal" href="#the-new-python-decorator-syntax-causes-problems-what-can-i-do" id="id74">The new Python decorator syntax causes problems.  What can I do?</a></li>
<li><a class="reference internal" href="#id2" id="id75">Running Python setup.py install from the leo directory doesn&#8217;t work.  Why not?</a></li>
<li><a class="reference internal" href="#i-can-t-run-the-leobridge-module-outside-of-leo-core-what-should-i-do" id="id76">I can&#8217;t run the LeoBridge module outside of leo/core.  What should I do?</a></li>
<li><a class="reference internal" href="#why-didn-t-leo-update-my-shadow-outline-as-expected" id="id77">Why didn&#8217;t Leo update my &#64;shadow outline as expected?</a></li>
<li><a class="reference internal" href="#why-do-qt-windows-disappear-in-my-scripts" id="id78">Why do Qt windows disappear in my scripts?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unicode-issues" id="id79">Unicode issues</a><ul>
<li><a class="reference internal" href="#i-can-not-enter-non-ascii-characters-what-can-i-do" id="id80">I can not enter non-ascii characters.  What can I do?</a></li>
<li><a class="reference internal" href="#some-characters-in-external-files-look-funny-what-can-i-do" id="id81">Some characters in external files look funny. What can I do?</a></li>
<li><a class="reference internal" href="#i-get-weird-results-when-defining-unicode-strings-in-scripts-what-is-going-on" id="id82">I get weird results when defining unicode strings in scripts.  What is going on?</a></li>
<li><a class="reference internal" href="#some-characters-are-garbled-when-importing-files-what-can-i-do" id="id83">Some characters are garbled when importing files. What can I do?</a></li>
<li><a class="reference internal" href="#python-s-print-statement-shows-byte-hash-for-unicode-characters-what-can-i-do" id="id84">Python&#8217;s print statement shows &#8216;byte hash&#8217; for unicode characters.  What can I do?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-external-files" id="id85">Using external files</a><ul>
<li><a class="reference internal" href="#how-do-i-inhibit-sentinels-in-external-files" id="id86">How do I inhibit sentinels in external files?</a></li>
<li><a class="reference internal" href="#how-do-i-prevent-leo-from-expanding-sections" id="id87">How do I prevent Leo from expanding sections?</a></li>
<li><a class="reference internal" href="#how-can-i-create-javascript-comments" id="id88">How can I create Javascript comments?</a></li>
<li><a class="reference internal" href="#how-can-i-disable-php-comments" id="id89">How can I disable PHP comments?</a></li>
<li><a class="reference internal" href="#how-can-i-use-leo-with-unsupported-languages" id="id90">How can I use Leo with unsupported languages?</a></li>
<li><a class="reference internal" href="#how-do-i-make-external-files-start-with-a-shebang-line" id="id91">How do I make external files start with a shebang line?</a></li>
<li><a class="reference internal" href="#can-file-trees-contain-material-not-in-the-external-file" id="id92">Can &#64;file trees contain material not in the external file?</a></li>
<li><a class="reference internal" href="#how-can-i-use-leo-with-older-c-compilers" id="id93">How can I use Leo with older C compilers</a></li>
<li><a class="reference internal" href="#why-can-t-i-use-ignore-directives-in-file-trees" id="id94">Why can&#8217;t I use &#64;ignore directives in &#64;file trees?</a></li>
<li><a class="reference internal" href="#how-can-i-avoid-getting-long-lines-in-external-files" id="id95">How can I avoid getting long lines in external files?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="customizing-leo">
<h2><a class="toc-backref" href="#id4">Customizing Leo</a><a class="headerlink" href="#customizing-leo" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-can-i-add-support-for-a-new-language">
<h3><a class="toc-backref" href="#id5">How can I add support for a new language?</a><a class="headerlink" href="#how-can-i-add-support-for-a-new-language" title="Permalink to this headline">¶</a></h3>
<p>See the instructions are in LeoPy.leo in:</p>
<div class="highlight-python"><div class="highlight"><pre>Notes:How To:How to add support for a new language section.
</pre></div>
</div>
<p>This section contains clones of all relevant parts of Leo that you will change.
Coming in Leo 4.4: Leo will use JEdit&#8217;s language description files to drive the
syntax colorer. To add support for a new language, just add another such
description file.</p>
</div>
<div class="section" id="how-can-i-create-a-pane-for-matplotlib-charts">
<h3><a class="toc-backref" href="#id6">How can I create a pane for matplotlib charts?</a><a class="headerlink" href="#how-can-i-create-a-pane-for-matplotlib-charts" title="Permalink to this headline">¶</a></h3>
<p>I&#8217;m trying to create a interactive chart in a embedded in a new leo pane
using matplotlib. However, I am not sure about the the best way to
implement this. I would appreciate some guidance on this please? The
questions I would like answered are:</p>
<ol class="arabic simple">
<li>How do I create a new blank pane for embedding a chart as well as other
QtWidgets.</li>
<li>Can I do this in a script or do I need to work with leo source?</li>
</ol>
<p>I want to create a data processing and visualization tool kit in leo. Like
Excel but using nodes instead of columns. Nodes will have data and I want
to create new data nodes by applying python functions to data in existing
nodes. The thing missing is the visualization within a leo pane (I can
easily launch a chart in it&#8217;s own window).</p>
<p>&#8212;&#8211; Terry Brown</p>
<p>You can run this script from any body pane:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">A script that adds a MatPlotLib pane to Leo.</span>

<span class="sd">After running this script, right click on one of the pane dividers and</span>
<span class="sd">select Insert. A new pane with a button &#39;Action&#39; appears. Click it, and</span>
<span class="sd">select &quot;Add matplot&quot; from the context menu.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">from</span> <span class="nn">leo.core.leoQt</span> <span class="kn">import</span> <span class="n">QtWidgets</span>

<span class="k">class</span> <span class="nc">MatplotPaneProvider</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;free_layout&#39;</span><span class="p">):</span>
            <span class="n">splitter</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">free_layout</span><span class="o">.</span><span class="n">get_top_splitter</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">splitter</span><span class="p">:</span>
                <span class="n">splitter</span><span class="o">.</span><span class="n">register_provider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">ns_provides</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span><span class="p">[(</span><span class="s">&#39;Add matplot&#39;</span><span class="p">,</span> <span class="s">&#39;_add_matplot_pane&#39;</span><span class="p">)]</span>
    <span class="k">def</span> <span class="nf">ns_provide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">id_</span> <span class="o">==</span> <span class="s">&#39;_add_matplot_pane&#39;</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSlider</span><span class="p">()</span> <span class="c">### w = myMatplotWidget()</span>
            <span class="k">return</span> <span class="n">w</span>
    <span class="k">def</span> <span class="nf">ns_provider_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># used by register_provider() to unregister previously registered</span>
        <span class="c"># providers of the same service</span>
        <span class="c"># provider ID is not the same as the service id_ above</span>
        <span class="k">return</span> <span class="s">&quot;completely unique value here&quot;</span>

<span class="n">MatplotPaneProvider</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<p>&#8212;&#8211; OP</p>
<p>I have managed to get a matplotlib graph embedded within a pane in
leo as a widget. I now need some help with how to interact with the
widget using scripts in leo. I am unsure about the following:</p>
<p><em>1/ How do I expose the widget within the leo environment?</em></p>
<p>If you were only going to have one and you weren&#8217;t going to destroy it,
you could just do something simple like c._matplot = self in its
constrictor (assuming c was passed to the constructor).</p>
<p>If you&#8217;re going to have more than one and they may be destroyed, it
might be simplest to let the free_layout / nested_splitter system manage
them:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ts</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">free_layout</span><span class="o">.</span><span class="n">get_top_splitter</span><span class="p">()</span>
<span class="n">matplotters</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">myMatplotWidget</span><span class="p">)</span>
</pre></div>
</div>
<p>should return a list of the widgets of your class in the layout, but only
if they&#8217;re in the main window, widgets in extra windows opened from the
&#8220;Open window&#8221; context menu item would be missed, I can add a
find_children() method to complement the find_child() method the splitters
already have to account for this.</p>
<p>Detail: the above is just using Qt&#8217;s QObject.findChildren(), the
nested_splitter find_child() and (not yet written) find_children()
versions search the extra windows as well.</p>
<p>Here I have created a self.mat in your MatplotPaneProvider class to make
the windget accessible but it doesn&#8217;t feel like the correct way to do this.</p>
<blockquote>
<div>mat = MatplotPaneProvider(c)
mat.mat.someMethod()
mat.mat.someOtherMethod()</div></blockquote>
<ol class="arabic simple" start="2">
<li>I would also like to make the widget accessible from any script within
leo. What&#8217;s the leo way of doing this?</li>
</ol>
<p>See above</p>
<ol class="arabic simple" start="3">
<li>If I create more than 1 pane containing these widgets. How do I switch
between them in scripts?*</li>
</ol>
<p>See above</p>
<ol class="arabic simple" start="4">
<li>Running this script more than once creates multiple items for Add
Matplot when pressing the Action button. How do I stop this from
happening? I have already tried returning a unique integer in *
ns_provider_id <em>but that did not work.</em></li>
</ol>
<p>The value returned by ns_provider_id should be unique for the provider
class, but constant. So it can just return something like &#8220;matplotlib provider ver 1&#8221;</p>
</div>
<div class="section" id="how-can-i-enable-and-disable-support-for-psyco">
<h3><a class="toc-backref" href="#id7">How can I enable and disable support for psyco?</a><a class="headerlink" href="#how-can-i-enable-and-disable-support-for-psyco" title="Permalink to this headline">¶</a></h3>
<p>Find the &#64;file leoApp.py node in leoPy.leo.
In the ctor for the LeoApp class set self.use_psyco to True or False.
You will find this ctor in the node:</p>
<div class="highlight-python"><div class="highlight"><pre>Code--&gt;Core classes...--&gt;@file leoApp.py--&gt;app.__init__
</pre></div>
</div>
<p>Note that this ivar can not be set using settings in leoSettings.leo because
Leo uses g.app.use_psyco before processing configuration settings.</p>
</div>
<div class="section" id="how-can-i-put-background-images-in-the-body-pane">
<h3><a class="toc-backref" href="#id8">How can I put background images in the body pane?</a><a class="headerlink" href="#how-can-i-put-background-images-in-the-body-pane" title="Permalink to this headline">¶</a></h3>
<p>Put the following in the style-sheet:</p>
<blockquote>
<div>QTextEdit#richTextEdit { background-image: url(&#8216;/home/tbrown/Desktop/cow2.jpg&#8217;); }</div></blockquote>
<p>If you wanted node specific backgrounds Leo would have to start setting
an attribute on the body widget, probably the gnx, so you could do:</p>
<div class="highlight-python"><div class="highlight"><pre>QTextEdit#richTextEdit[leo_gnx=&#39;tbrown.20130430222443.19340&#39;] {
    background-image: url(&#39;/home/tbrown/Desktop/cow2.jpg&#39;);
}
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-use-leo-s-legacy-key-bindings">
<h3><a class="toc-backref" href="#id9">How can I use Leo&#8217;s legacy key bindings?</a><a class="headerlink" href="#how-can-i-use-leo-s-legacy-key-bindings" title="Permalink to this headline">¶</a></h3>
<p>You can &#8216;revert&#8217; to old key bindings as follows:</p>
<ol class="arabic simple">
<li>Open leoSettings.leo.</li>
<li>Find the node &#8216;Keyboard shortcuts&#8217;.</li>
<li>Disable the old bindings by moving the node
<a class="reference external" href="mailto:'&#37;&#52;&#48;keys">'<span>&#64;</span>keys</a> EKR bindings: Emacs keys + modes&#8217;
so that it is a child of the node:
<a class="reference external" href="mailto:'&#37;&#52;&#48;ignore">'<span>&#64;</span>ignore</a> Unused key bindings&#8217;.</li>
<li>Notice that there are two child nodes of the node
<a class="reference external" href="mailto:'&#37;&#52;&#48;ignore">'<span>&#64;</span>ignore</a> Unused key bindings&#8217;
that refer to legacy key bindings:<ul>
<li><a class="reference external" href="mailto:'&#37;&#52;&#48;keys">'<span>&#64;</span>keys</a> Legacy Leo shortcuts with important Emacs bindings&#8217;</li>
<li><a class="reference external" href="mailto:'&#37;&#52;&#48;keys">'<span>&#64;</span>keys</a> Legacy Leo bindings&#8217;.</li>
</ul>
</li>
<li>Move <strong>one</strong> of these two legacy nodes up one level so that it is a child of the node
&#8216;Keyboard shortcuts&#8217;.
It should <strong>not</strong> be a child of the node
<a class="reference external" href="mailto:'&#37;&#52;&#48;ignore">'<span>&#64;</span>ignore</a> Unused key bindings&#8217;.</li>
</ol>
</div>
<div class="section" id="how-do-i-add-a-new-menu-item-from-a-plugin">
<h3><a class="toc-backref" href="#id10">How do I add a new menu item from a plugin?</a><a class="headerlink" href="#how-do-i-add-a-new-menu-item-from-a-plugin" title="Permalink to this headline">¶</a></h3>
<p>c.frame.menu.createMenuItemsFromTable will append items to the end of an existing menu.
For example, the following script will add a new item at the end of the &#8216;File&#8217; menu:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
    <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">()</span>

<span class="n">table</span> <span class="o">=</span> <span class="p">((</span><span class="s">&quot;Test1&quot;</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="n">callback</span><span class="p">),)</span>

<span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">createMenuItemsFromTable</span><span class="p">(</span><span class="s">&#39;File&#39;</span><span class="p">,</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
<p>Plugins can do anything with menus using c.frame.menu.getMenu. For example, here
is a script that adds a Test menu item after the &#8216;Open With&#8217; menu item in the
File menu:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">keys</span><span class="p">):</span>
    <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">()</span>

<span class="n">fileMenu</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">getMenu</span><span class="p">(</span><span class="s">&#39;File&#39;</span><span class="p">)</span>

<span class="c"># 3 is the position in the menu.  Other kinds of indices are possible.</span>
<span class="n">fileMenu</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s">&#39;command&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Test2&#39;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-set-selection-colors">
<h3><a class="toc-backref" href="#id11">How do I set selection colors?</a><a class="headerlink" href="#how-do-i-set-selection-colors" title="Permalink to this headline">¶</a></h3>
<p>You set most colors in the following settings node:</p>
<div class="highlight-python"><div class="highlight"><pre>@data qt-gui-plugin-style-sheet
</pre></div>
</div>
<p>However, settings for colors that can change during Leo&#8217;s execution
are found in the node:</p>
<div class="highlight-python"><div class="highlight"><pre>Body pane colors
</pre></div>
</div>
<p>These settings are as follows, with the defaults as shown:</p>
<div class="highlight-python"><div class="highlight"><pre>\@color body_cursor_background_color = None
\@color body_cursor_foreground_color = None
\@color body_insertion_cursor_color = None
\@color body_text_background_color = None
\@color body_text_foreground_color = None
\@color command_mode_bg_color = #f2fdff&lt;/vh&gt;&lt;/v&gt;
\@color command_mode_fg_color = None&lt;/vh&gt;&lt;/v&gt;
\@color insert_mode_bg_color = #fdf5f5&lt;/vh&gt;&lt;/v&gt;
\@color insert_mode_fg_color = black&lt;/vh&gt;&lt;/v&gt;
\@color overwrite_mode_bg_color = azure2&lt;/vh&gt;&lt;/v&gt;
\@color overwrite_mode_fg_color = black&lt;/vh&gt;&lt;/v&gt;
\@color unselected_body_bg_color = #ffffef&lt;/vh&gt;&lt;/v&gt;
\@color unselected_body_fg_color = black&lt;/vh&gt;&lt;/v&gt;
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-specify-qt-fonts">
<h3><a class="toc-backref" href="#id12">How do I specify qt fonts?</a><a class="headerlink" href="#how-do-i-specify-qt-fonts" title="Permalink to this headline">¶</a></h3>
<p>When using the Qt gui, you specify fonts
using the node in leoSettings.leo called:</p>
<div class="highlight-python"><div class="highlight"><pre>@data qt-gui-plugin-style-sheet
</pre></div>
</div>
<p>As usual, you will probably want to put this node in your myLeoSettings.leo file.</p>
</div>
<div class="section" id="how-do-i-submit-a-plugin">
<h3><a class="toc-backref" href="#id13">How do I submit a plugin?</a><a class="headerlink" href="#how-do-i-submit-a-plugin" title="Permalink to this headline">¶</a></h3>
<p>You have two options:</p>
<ul class="simple">
<li>Get cvs write access, and add the &#64;file file to the plugins directory.</li>
<li>Just send the &#64;file file to me at <a class="reference external" href="mailto:edreamleo&#37;&#52;&#48;gmail&#46;com">edreamleo<span>&#64;</span>gmail<span>&#46;</span>com</a>.
That&#8217;s all you need to do.  In particular that there is no need to change leoPlugins.leo.</li>
</ul>
</div>
</div>
<div class="section" id="getting-leo">
<h2><a class="toc-backref" href="#id14">Getting Leo</a><a class="headerlink" href="#getting-leo" title="Permalink to this headline">¶</a></h2>
<div class="section" id="where-can-i-get-official-releases-of-leo">
<h3><a class="toc-backref" href="#id15">Where can I get official releases of Leo?</a><a class="headerlink" href="#where-can-i-get-official-releases-of-leo" title="Permalink to this headline">¶</a></h3>
<p>You can get the latest official releases of Leo at
<a class="reference external" href="http://sourceforge.net/project/showfiles.php?group_id=3458&amp;package_id=29106">http://sourceforge.net/project/showfiles.php?group_id=3458&amp;package_id=29106</a></p>
<p>However, if at all possible, it is better to use git to get the latest
sources. See the next entry.</p>
</div>
<div class="section" id="how-do-i-use-git-to-get-the-latest-sources-from-leo-s-github-site">
<h3><a class="toc-backref" href="#id16">How do I use git to get the latest sources from Leo&#8217;s GitHub site?</a><a class="headerlink" href="#how-do-i-use-git-to-get-the-latest-sources-from-leo-s-github-site" title="Permalink to this headline">¶</a></h3>
<p>Many users will want to track the development version of Leo, in order to stay
on top of the latest features and bug fixes. Running the development version is
quite safe and easy, and it&#8217;s also a requirement if you want to contribute to
Leo.</p>
<ol class="arabic">
<li><p class="first">First, you need to get git from <a class="reference external" href="http://git-scm.com/">http://git-scm.com/</a>.</p>
</li>
<li><p class="first">Get Leo from GitHub by doing:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/leo-editor/leo-editor (http access)
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git@github.com:leo-editor/leo-editor.git (ssh access)
</pre></div>
</div>
</li>
</ol>
<p>And that&#8217;s it! You can run the launchLeo script (in the top-level branch directory) directly.
When you want to refresh the code with latest modifications from GitHub, &#8216;run git pull&#8217;.</p>
</div>
<div class="section" id="how-can-i-get-recent-snapshots-of-leo">
<h3><a class="toc-backref" href="#id17">How can I get recent snapshots of Leo?</a><a class="headerlink" href="#how-can-i-get-recent-snapshots-of-leo" title="Permalink to this headline">¶</a></h3>
<p>Daily snapshots are available at <a class="reference external" href="http://www.greygreen.org/leo/">http://www.greygreen.org/leo/</a></p>
</div>
</div>
<div class="section" id="installing-leo">
<h2><a class="toc-backref" href="#id18">Installing Leo</a><a class="headerlink" href="#installing-leo" title="Permalink to this headline">¶</a></h2>
<div class="section" id="leo-s-installer-failed-what-do-i-do">
<h3><a class="toc-backref" href="#id19">Leo&#8217;s installer failed, what do I do?</a><a class="headerlink" href="#leo-s-installer-failed-what-do-i-do" title="Permalink to this headline">¶</a></h3>
<p>You can simply unpack Leo anywhere and run from there.  You don&#8217;t need the
installer.</p>
<p>From a console window, cd to the top-level leo folder.  Run Leo as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>python launchLeo.py
</pre></div>
</div>
<p>To run Leo with Qt look and feel, use the &#8211;gui=qt option:</p>
<div class="highlight-python"><div class="highlight"><pre>python launchLeo.py --gui=qt
</pre></div>
</div>
<p>To load Leo&#8217;s source, load leoPyRef.leo:</p>
<div class="highlight-python"><div class="highlight"><pre>python launchLeo.py --gui=qt leo\\core\\leoPyRef.leo
</pre></div>
</div>
</div>
<div class="section" id="nothing-or-almost-nothing-happens-when-i-start-leo-what-should-i-do">
<h3><a class="toc-backref" href="#id20">Nothing (or almost nothing) happens when I start Leo.  What should I do?</a><a class="headerlink" href="#nothing-or-almost-nothing-happens-when-i-start-leo-what-should-i-do" title="Permalink to this headline">¶</a></h3>
<p>Missing modules can cause installation problems.
If the installer doesn&#8217;t work (or puts up a dialog containing no text), you may install Leo from the .zip file
as described at <a class="reference external" href="installing.html#installing-leo-on-windows">How to install Leo on Windows</a>.
However you are installing Leo,
be sure to <a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>.
because as a last resort Leo prints error messages to the console.</p>
</div>
<div class="section" id="running-python-setup-py-install-from-the-leo-directory-doesn-t-work-why-not">
<h3><a class="toc-backref" href="#id21">Running Python setup.py install from the leo directory doesn&#8217;t work.  Why not?</a><a class="headerlink" href="#running-python-setup-py-install-from-the-leo-directory-doesn-t-work-why-not" title="Permalink to this headline">¶</a></h3>
<p>Leo&#8217;s setup.py script is intended only to create source distributions. It can&#8217;t
be used to install Leo because Leo is not a Python package.</p>
</div>
</div>
<div class="section" id="learning-to-use-leo">
<h2><a class="toc-backref" href="#id22">Learning to use Leo</a><a class="headerlink" href="#learning-to-use-leo" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-s-the-best-way-to-learn-to-use-leo">
<h3><a class="toc-backref" href="#id23">What&#8217;s the best way to learn to use Leo?</a><a class="headerlink" href="#what-s-the-best-way-to-learn-to-use-leo" title="Permalink to this headline">¶</a></h3>
<p>First, read the <a class="reference external" href="tutorial.html">tutorial</a>. This will be enough to get you started if you just
want to use Leo as an <a class="reference external" href="glossary.html#outliner">outliner</a>. If you intend to use Leo for programming, read
the <a class="reference external" href="tutorial-programming.html">tutorial about programming</a>, then look at Leo&#8217;s source code in the file LeoPy.leo.
Spend 5 or 10 minutes browsing through the outline. Don&#8217;t worry about details;
just look for the following common usage patterns:</p>
<ul class="simple">
<li>The (Projects) tree shows how to use clones to represent tasks.</li>
<li>Study &#64;file leoNodes.py.
It shows how to define more than one class in single file.</li>
<li>Most other files show how to use a single &#64;others directive to define one class.</li>
<li>Most methods are defined using &#64;others, <em>not</em> section definition nodes.</li>
</ul>
</div>
<div class="section" id="why-should-i-use-clones">
<h3><a class="toc-backref" href="#id24">Why should I use clones?</a><a class="headerlink" href="#why-should-i-use-clones" title="Permalink to this headline">¶</a></h3>
<p>You will lose much of Leo&#8217;s power if you don&#8217;t use clones.
See <a class="reference external" href="tutorial-pim.html#clones">Clones</a> and <a class="reference external" href="tutorial-pim.html#views">Views</a> for full details.</p>
</div>
<div class="section" id="how-does-ekr-use-clones">
<h3><a class="toc-backref" href="#id25">How does EKR use clones?</a><a class="headerlink" href="#how-does-ekr-use-clones" title="Permalink to this headline">¶</a></h3>
<p>For the last several weeks I&#8217;ve used clones in a new, more effective way,
inspired by git&#8217;s stash/unstash commands. Here are the main ideas.</p>
<ol class="arabic simple">
<li>[Most important] I avoid putting clones in two different <em>external</em>
files.</li>
</ol>
<p>For any task, I create a task node that resides in &#64;file leoToDo.txt. I
clone that node and put it in the outline, <em>never</em> in any other &#64;file node.
This instantly eliminates clone wars.</p>
<ol class="arabic simple" start="2">
<li>I use top-level &#8220;stashed&#8221; nodes/trees in my local copy of leoPy.leo.</li>
</ol>
<p>These clones are <em>not</em> written to any external file, so they would be lost
if I lost leoPy.leo. But the risks are negligible because all stashed nodes
are clones of nodes that <em>do</em> exist in external files.</p>
<ol class="arabic simple" start="3">
<li>I have two main stashed trees: recent files and recent code.</li>
</ol>
<p>The &#8220;recent files&#8221; tree contains clones of all the &#64;file nodes I have
worked on recently. This speeds up access to them. That happens
surprisingly often&#8211;often enough to be well worth maintaining the tree.
Furthermore, because Leo&#8217;s new pylint command now works on trees, I can
check all recently-changed files simply by running pylint on the &#8220;recent
files&#8221; tree.</p>
<p>The &#8220;recent code&#8221; tree is even more valuable, for three reasons. The first
is obvious&#8211;it speeds access to recently-changed nodes.</p>
<p>Second, the &#8220;recent code&#8221; tree allows me to work on multiple tasks without
getting overwhelmed by details and loose nodes lying around. I add
organizer nodes as needed to make accessing the nodes faster, and also to
jog my memory about what I was doing when I changed those nodes ;-)</p>
<p>Third, the &#8220;recent code&#8221; tree allows me <em>not</em> to put clones in the &#64;file
leoProjects.txt tree. This leads me to...</p>
<ol class="arabic simple" start="4">
<li>I use clones in a stylized way when fixing and committing bugs.</li>
</ol>
<p>I always use clones when working on a project. A &#8220;task&#8221; node contains
clones of all nodes related to the task. The task node typically remains in
leoToDo.txt until the task is completely finished. While working on the
bug, I create a clone of the task node, and move that clone to the bottom
top-level node of the outline. Among other things, this makes it easy to
limit searches without actually choosing &#8220;suboutline only&#8221; in the Find
panel. This workflow is decades old.</p>
<p>The following is the heart of the new workflow. When a task is complete, I
do the following:</p>
<ol class="upperalpha">
<li><dl class="first docutils">
<dt>First, I create a <strong>stashed-task</strong> node, containing all the clones that</dt>
<dd><p class="first last">were previously in the task node.</p>
</dd>
</dl>
</li>
</ol>
<p>The <em>stashed-task</em> becomes pre-writing for the commit log. The <em>task</em> node
instantly becomes pre-writing for the release notes, so if it needs to
discuss any code in the clones that have just been moved to the
stashed-task node, I write those words immediately, while all details are
fresh in my mind.</p>
<ol class="upperalpha simple" start="2">
<li>Now I move the cloned task node that is in leoToDo.txt to the
appropriate place in leoProjects.txt.</li>
<li>Next I do the commit.</li>
</ol>
<p>The <em>other</em> clone of the task node, and the stashed task node are still
within easy reach, and I typically use both nodes to create the commit log.
The commit will typically consist of the changed leoToDo.txt and
leoProjects.txt and whatever .py files the task itself changed. Happily,
leoToDo.txt and leoProjects.txt are now up-to-date because of steps A and
B.</p>
<ol class="upperalpha simple" start="4">
<li>Finally, I clean up.</li>
</ol>
<p>I delete the top-level clone of the task node, and move the stashed-task
node to the &#8220;recent code&#8221; tree.</p>
<ol class="upperalpha simple" start="5">
<li>Later, when it appears that activity has died down on various projects,
I&#8217;ll delete nodes from the &#8220;recent files&#8221; an &#8220;recent code&#8221; trees. This
is a minor judgment call: I want to leave nodes in the trees while they
are useful, but not significantly longer than that. I do <em>not</em> regard
these trees as permanently useful. leoProjects.txt should contain <em>all</em>
permanent notes about a project.</li>
</ol>
<p>===== Conclusions</p>
<p>This work flow may seem complicated. Believe me, it is not. It&#8217;s easier to
use than to describe.</p>
<p>This workflow has big advantages:</p>
<ol class="arabic simple">
<li>Clone wars are gone for good.</li>
<li>All recent data is easily available.</li>
<li>Task nodes and stashed-task nodes provide natural places for
proto-documentation.</li>
<li>Banning clones from leoProjects.txt forces me to complete the first
draft of the documentation before committing the fix.</li>
</ol>
</div>
<div class="section" id="when-is-using-a-section-better-than-using-a-method">
<h3><a class="toc-backref" href="#id26">When is using a section better than using a method?</a><a class="headerlink" href="#when-is-using-a-section-better-than-using-a-method" title="Permalink to this headline">¶</a></h3>
<p>Use methods for any code that is used (called or referenced) more than once.</p>
<p><a class="reference external" href="glossary.html#sections">Sections</a> are convenient in the following circumstances:</p>
<ul>
<li><p class="first">When you want to refer to snippets of code the can not be turned into methods.
For example, many plugins start with the code like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;&lt; docstring &gt;&gt;
&lt;&lt; imports &gt;&gt;
&lt;&lt; version history &gt;&gt;
&lt;&lt; globals &gt;&gt;
</pre></div>
</div>
<p>None of these sections could be replaced by methods.</p>
</li>
<li><p class="first">When you want to refer to a snippet of code that shares local variables with the enclosing code.
This is surprisingly easy and safe to do, <em>provided</em> the section is used only in one place.
<a class="reference external" href="glossary.html#section-names">Section names</a> in such contexts can be clearer than method names.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;&lt; init ivars for writing &gt;&gt;
</pre></div>
</div>
</li>
</ul>
<p>In short, I create sections when convenient,
and convert them to functions or methods if they need to be used in several places.</p>
</div>
<div class="section" id="when-is-deleting-a-node-dangerous">
<h3><a class="toc-backref" href="#id27">When is deleting a node dangerous?</a><a class="headerlink" href="#when-is-deleting-a-node-dangerous" title="Permalink to this headline">¶</a></h3>
<p>A <strong>dangerous</strong> delete is a deletion of a node so that all the data in the node
is deleted <em>everywhere</em> in an outline. The data is gone, to be retrieved only
via undo or via backups. It may not be obvious which deletes are dangerous in an
outline containing clones. Happily, there is a very simple rule of thumb:</p>
<div class="highlight-python"><div class="highlight"><pre>Deleting a non-cloned node is *always* dangerous.
Deleting a cloned node is *never* dangerous.
</pre></div>
</div>
<p>We could also consider a delete to be dangerous <strong>if it results in a node being
omitted from an external file.</strong> This can happen as follows. Suppose we have the
following outline (As usual, A&#8217; indicates that A is marked with a clone mark):</p>
<div class="highlight-python"><div class="highlight"><pre>- @file spam.py
    - A&#39;
        - B
- Projects
    - A&#39;
        - B
</pre></div>
</div>
<p>Now suppose we clone B, and move the clone so the tree looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>- @file spam.py
    - A&#39;
        - B&#39;
- Projects
    - A&#39;
        - B&#39;
    - B&#39;
</pre></div>
</div>
<p>If (maybe much later), we eliminate B&#8217; as a child of A will get:</p>
<div class="highlight-python"><div class="highlight"><pre>- @file spam.py
    - A&#39;
- Projects
    - A&#39;
    - B
</pre></div>
</div>
<p>B has not been destroyed, but B is gone from &#64;file spam.py! So in this sense deleting a clone node can also be called dangerous.</p>
</div>
<div class="section" id="why-doesn-t-leo-support-cross-file-clones">
<h3><a class="toc-backref" href="#id28">Why doesn&#8217;t Leo support cross-file clones?</a><a class="headerlink" href="#why-doesn-t-leo-support-cross-file-clones" title="Permalink to this headline">¶</a></h3>
<p>Cross-file clones are cloned nodes in one outline that refer to data in another
outline. This is a frequently requested feature. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>I would absolutely love to have the leo files in different project
directories, and a &quot;master&quot; leo file to rule them all.
</pre></div>
</div>
<p>However, cross-file clones will never be a part of Leo. Indeed, cross-file
clones would violate the principle that data should be defined and managed in
exactly one place. Just as human managers would not willingly accept shared
responsibility for even a single line of code, every piece of Leonine data
should be the responsibility of one and <em>only</em> one .leo file.</p>
<p>The problem fundamental. If the <em>same</em> (cloned) data were &#8220;owned&#8221; by two
different Leo files we would have a classic &#8220;multiple update problem&#8221; for the
data. Each outline could change the data in incompatible ways, and whichever
outline changed the data last would &#8220;win.&#8221;</p>
<p>To make such a scheme workable and safe, one would have to devise a scheme that
would keep the data in &#8220;component&#8221; .leo files consistent even when the component
.leo files changed &#8220;randomly&#8221;, without the &#8220;master&#8221; .leo file being in <em>any</em> way
in &#8220;control&#8221; of the changes. Good luck :-)</p>
<p>Let us be clear: it&#8217;s no good having a scheme that works <em>most</em> of the time, it
must work <em>all</em> the time, even with unexpected or even pathological file
updates. If it doesn&#8217;t you are asking for, and will eventually get, catastrophic
data loss, without being aware of the loss for an arbitrarily long period of
time. Even with a source code control system this would be an intolerable
situation.</p>
</div>
<div class="section" id="how-does-ekr-leo-s-developer-use-leo">
<h3><a class="toc-backref" href="#id29">How does EKR (Leo&#8217;s developer) use Leo?</a><a class="headerlink" href="#how-does-ekr-leo-s-developer-use-leo" title="Permalink to this headline">¶</a></h3>
<p>Here is the workflow I use to develop Leo. The intention is to help
present and potential developers use Leo effectively.</p>
<p>Overview:</p>
<ul class="simple">
<li>Develop in an outline containing all of Leo&#8217;s source files. Close this outline
rarely: this keeps the code I am using stable while I&#8217;m hacking the code.</li>
<li>Test in a <em>separate</em> .leo file, say test.leo. In fact, I often test in a
private file, ekr.leo, so that test.leo doesn&#8217;t get continually updated on git
with trivial changes.</li>
</ul>
<p>These two points are covered in a bit more detail in <a class="reference external" href="FAQ.html#how-can-i-use-leo-to-develop-leo-itself">This FAQ entry</a>.</p>
<p>Additional tips:</p>
<p>A. Avoid using the mouse whenever possible. For example, use alt-tab to switch
between windows.</p>
<ol class="upperalpha simple" start="2">
<li>Always develop Leo in a console. This allows you to see the output of g.trace.</li>
</ol>
<p>Speaking of g.trace, I hardly ever use &#8216;print&#8217; because g.trace prints the name
of the function or method in which it appears. The typical pattern for enabling
traces is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trace</span> <span class="o">=</span> <span class="bp">True</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">g</span><span class="o">.</span><span class="n">unitTesting</span>
<span class="k">if</span> <span class="n">trace</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">whatever</span><span class="p">)</span>
</pre></div>
</div>
<p>This pattern is especially useful when a method contains multiple calls to
g.trace.</p>
<ol class="upperalpha" start="3">
<li><p class="first">I use scripts to open particular Leo files. These are batch files on Windows,
and aliases on Linux, but invoking them is the same on either platform:</p>
<div class="highlight-python"><div class="highlight"><pre>all:     opens all my main development files using the qt-tabs gui.
t:       opens test.leo.
e:       opens ekr.leo.  I use this file for private testing.
d:       opens LeoDocs.leo.
s:       opens LeoPy.leo.
plugins: opens leoPlugins.leo.
gui:     opens leoGui.leo.
u:       opens unitTest.leo.
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div>These run Leo with Python 3.x. There are similar scripts, ending in 2, that run
Leo with Python 2.x. For example, u2 opens unitTest.leo with Python 2.x.
Thus, to run a test, I alt-tab to an available console window, then type &#8216;e&#8217; or
&#8216;t&#8217; or &#8216;u&#8217; or, if I want Python 2.x, &#8216;e2&#8217; or &#8216;t2&#8217; or &#8216;u2&#8217;.</div></blockquote>
<ol class="upperalpha simple" start="4">
<li>Use clones to focus attention on the task at hand.
For more details, see the tutorial&#8217;s introduction to <a class="reference external" href="tutorial-pim.html#clones">clones</a>.</li>
<li>For thousand of example of my programming style, see leoPy.leo and
leoGuiPlugins.leo. The projects section in leoPy.leo contains many examples
of using clones to create view nodes. I typically delete the clones in the
views shortly before a release.</li>
</ol>
<p>Writing documentation:</p>
<ul>
<li><p class="first">Use postings as pre-writing for documentation.</p>
<p>I don&#8217;t mind blabbing on and on about Leo because all my posts become
pre-writing for Leo&#8217;s documentation. I simply copy posts to nodes in the
&#8220;documentation to-do&#8221; section. At release time, I edit these nodes and put
them in Leo&#8217;s main documentation or the release notes. This posting is an
example.</p>
</li>
<li><dl class="first docutils">
<dt>Use the vr command to debug reStructuredText documentation. The viewrendered</dt>
<dd><p class="first last">pane updates as you type. This makes Leo a killer app for rST.</p>
</dd>
</dl>
</li>
</ul>
<p>Administrative tips:</p>
<ul>
<li><p class="first">Never rely on memory.</p>
<blockquote>
<div><p>A project like this contains thousands and thousands of details. Everything
eventually goes into a Leo node somewhere. If it doesn&#8217;t it surely <em>will</em> be
forgotten.</p>
</div></blockquote>
</li>
<li><p class="first">Do easy items first.</p>
<blockquote>
<div><p>This keeps to-do lists short, which keeps energy high.</p>
</div></blockquote>
</li>
</ul>
<p>Tips for using git:</p>
<p>I use the following batch files related to bzr:</p>
<div class="highlight-python"><div class="highlight"><pre>g:      short for git
gs:     short for bzr status
tr:     short for cd &lt;path to trunk&gt;
main:   short for cd &lt;path to copy of trunk&gt;
</pre></div>
</div>
<p>The &#8220;main&#8221; (copy) of the trunk is purely for handling git conflicts.
If one happens I do this:</p>
<div class="highlight-python"><div class="highlight"><pre>main
g pull
g merge ../trunk
g c -m &quot;my commit message&quot;
g push
</pre></div>
</div>
<p>If the merge goes well (it usually does), I do this to resolve the conflict:</p>
<div class="highlight-python"><div class="highlight"><pre>tr
g pull
</pre></div>
</div>
</div>
<div class="section" id="how-does-leo-handle-clone-conflicts">
<h3><a class="toc-backref" href="#id30">How does Leo handle clone conflicts?</a><a class="headerlink" href="#how-does-leo-handle-clone-conflicts" title="Permalink to this headline">¶</a></h3>
<p>Some people seem to think that it is difficult to understand how Leo
handles &#8220;clone wars&#8221;: differing values for a cloned nodes that appear in
several external files. That&#8217;s not true. The rule is:</p>
<div class="highlight-python"><div class="highlight"><pre>**The last clone that Leo reads wins.**
</pre></div>
</div>
<p>That is, for any cloned node C, Leo takes the value of C.h and C.b to
be the values specified by the last copy that Leo reads.</p>
<p>There is only one complication:</p>
<div class="highlight-python"><div class="highlight"><pre>**Leo reads the entire outline before reading any external files.**
</pre></div>
</div>
<p>Thus, if C appears in x.leo, y.py and z.py, Leo will choose the value for C
in x.py or y.py, depending on which &#64;&lt;file&gt; node appears later in the
outline.</p>
<p><strong>Note</strong>: Whenever Leo detects multiple values for C when opening an
outline, Leo creates a &#8220;Recovered nodes&#8221; tree. This tree contains all the
various values for C, nicely formatted so that it is easy to determine
where the differences are.</p>
</div>
</div>
<div class="section" id="leo-in-shared-environments">
<h2><a class="toc-backref" href="#id31">Leo in Shared environments</a><a class="headerlink" href="#leo-in-shared-environments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-should-i-use-leo-with-bzr-git-hg-svn-cvs">
<h3><a class="toc-backref" href="#id32">How should I use Leo with bzr/git/hg/svn/cvs?</a><a class="headerlink" href="#how-should-i-use-leo-with-bzr-git-hg-svn-cvs" title="Permalink to this headline">¶</a></h3>
<p>Using &#64;file trees can eliminate most problems with using Leo in cooperative
(SCCS) environments:</p>
<ul class="simple">
<li>Developers should use &#64;file trees to create external files in any kind of
cooperative environment.</li>
<li>If sentinels are frowned upon in your development community, use &#64;auto or
&#64;shadow instead of &#64;file.</li>
<li>The repository contains <strong>reference</strong> .leo files. These reference files should
contain nothing but &#64;file nodes. Reference files should change only when
new external files get added to the project. Leo&#8217;s <a class="reference external" href="https://github.com/leo-editor/leo-editor">git repository</a> and Leo
distributions contain the following reference files: LeoPyRef.leo,
LeoPluginsRef.leo and leoGuiPluginsRef.leo. Developers should use
local copies of reference files for their own work. For example, instead of
using LeoPyRef.leo directly, I use a copy called LeoPy.leo.</li>
</ul>
</div>
<div class="section" id="how-can-i-use-leo-cooperatively-without-sentinels">
<h3><a class="toc-backref" href="#id33">How can I use Leo cooperatively without sentinels?</a><a class="headerlink" href="#how-can-i-use-leo-cooperatively-without-sentinels" title="Permalink to this headline">¶</a></h3>
<p>Leo&#8217;s sentinels add outline structure to source files.
However, those sentinels annoy some people who don&#8217;t use Leo.</p>
<p>You can use &#64;auto, &#64;shadow or &#64;nosent trees to edit
files that are shared with those who don&#8217;t want to see sentinel comments.</p>
<ul class="simple">
<li>&#64;auto is best for files whose imported outline structure often changes. In
most cases, this will be the best option. The drawback of &#64;auto files are a)
you can&#8217;t use clones and b) you can&#8217;t add your own organizer nodes.</li>
<li>&#64;shadow will work for files whose outline structure seldom changes.
The advantage of &#64;shadow is that you can add your own structure.</li>
<li>&#64;nosent is appropriate only for files that you alone modify.</li>
</ul>
</div>
<div class="section" id="what-s-the-recommended-way-to-upgrade-leo">
<h3><a class="toc-backref" href="#id34">What&#8217;s the recommended way to upgrade Leo?</a><a class="headerlink" href="#what-s-the-recommended-way-to-upgrade-leo" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Archive and remove the previous version of Leo.</li>
<li>Download the nightly snapshot zip file.</li>
<li>Unzip it into the same place as the previous version.</li>
<li>Enjoy your up-to-date Leo code...</li>
</ol>
<p>To make this work, it&#8217;s important to keep your folder containing Leo
separate from your .mySettings.leo and any data files.</p>
</div>
</div>
<div class="section" id="scipting-testing">
<h2><a class="toc-backref" href="#id35">Scipting &amp; Testing</a><a class="headerlink" href="#scipting-testing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-can-i-create-buttons-with-dropdown-menus">
<h3><a class="toc-backref" href="#id36">How can I create buttons with dropdown menus?</a><a class="headerlink" href="#how-can-i-create-buttons-with-dropdown-menus" title="Permalink to this headline">¶</a></h3>
<p>The code that handles the rclick menu is in the QtIconBarClass class in
qt_frame.py.</p>
<p>Show that the  top-level button contains structure, do this:</p>
<div class="highlight-python"><div class="highlight"><pre>@string mod_scripting_subtext = ▾
</pre></div>
</div>
<p>An alternative: ▼ U=25BC: Black Down-Pointing Triangle.</p>
<p>It&#8217;s reasonable to have the top-level button just be a placeholder for
subsidiary &#64;rclick nodes. To do that without getting a warning when
clicking the top-level button, set its script to &#8220;empty string&#8221;.</p>
</div>
<div class="section" id="how-can-i-make-commonly-used-scripts-widely-accessible">
<h3><a class="toc-backref" href="#id37">How can I make commonly-used scripts widely accessible?</a><a class="headerlink" href="#how-can-i-make-commonly-used-scripts-widely-accessible" title="Permalink to this headline">¶</a></h3>
<p>Put &#64;command nodes as children of an &#64;commands node in myLeoSettings.leo.
This makes the the &#64;command nodes available to all opened .leo files.</p>
<p>Using &#64;command rather than &#64;button means that there is never any need to
disable scripts. There is no need for &#64;button. To see the list of your
&#64;command nodes, type:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;alt-x&gt;@c&lt;tab&gt;
</pre></div>
</div>
<p>Similarly to see the list of your &#64;command nodes, type:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;alt-x&gt;@b&lt;tab&gt;
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-test-settings-easily">
<h3><a class="toc-backref" href="#id38">How can I test settings easily?</a><a class="headerlink" href="#how-can-i-test-settings-easily" title="Permalink to this headline">¶</a></h3>
<p>Use .leo files to test settings rather than to contain data. These files
would typically contain just an &#64;settings tree, and one or two nodes
illustrating their effect. Opening such files limits the effects of
experimental/non-standard/risky settings. This is a great tip to know.</p>
<p>For example, the files leo10pt.leo, leo12pt.leo, leo14-12pt.leo and
leo14pt.leo in the leo/config folder make it easy to compare different font
settings.</p>
<p>As another example, when starting the vim-mode project I created a .leo
file containing &#64;bool vim-mode = True. By opening this file I test vim mode
without interfering with my normal work flow.</p>
</div>
<div class="section" id="how-can-i-use-setuptools-instead-of-bat-files">
<h3><a class="toc-backref" href="#id39">How can I use setuptools instead of .bat files?</a><a class="headerlink" href="#how-can-i-use-setuptools-instead-of-bat-files" title="Permalink to this headline">¶</a></h3>
<p>File under things-I-didn&#8217;t-know-but-should-have:</p>
<p>Instead of creating batch files all over the place to fire up python
programs, and then having to cope with annoying &#8220;Terminate batch job
(Y/N)?&#8221; with Ctrl-C/Break you can ask python setuptools to create an .exe
in the PythonScripts folder.</p>
<p>in same folder as foo.py create setup.py, populate like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&#39;Foo for you&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.3&#39;</span><span class="p">,</span>
    <span class="n">py_modules</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="s">&#39;&#39;&#39;</span>
<span class="s">        [console_scripts]</span>
<span class="s">        foo = foo</span>
<span class="s">        &#39;&#39;&#39;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Then run &#8220;pip &#8211;editable install . &#8221; in the same folder. Foo.exe will be
created in C:pythonxxScripts. As long as that folder is in path you can
use foo like any other command line program. Furthermore the &#8220;editable&#8221;
parameter means we can continue to edit and change foo.py and the changes
are always live.</p>
<p>Yeah! No more &#8220;pushd ..pathtodatafolder &amp;&amp; python ..pathtocodefoo.py
&#8211;do-stuff-here ...&#8221; for me. :)</p>
<p>Works for Leo too &#8211; with the existing setup.py. It creates leo.exe and
leoc.exe for Windowed mode (no log messages to console) and console mode
respectively.</p>
</div>
<div class="section" id="how-can-scripts-call-functions-from-leo-s-core">
<h3><a class="toc-backref" href="#id40">How can scripts call functions from Leo&#8217;s core?</a><a class="headerlink" href="#how-can-scripts-call-functions-from-leo-s-core" title="Permalink to this headline">¶</a></h3>
<p>I am going through something similar Matt Wilkie went through in this post
<a class="reference external" href="https://groups.google.com/forum/?fromgroups=#!searchin/leo-editor/leopyref/leo-editor/pWyd5ae952I/kvxf_H-QBq4J">https://groups.google.com/forum/?fromgroups=#!searchin/leo-editor/leopyref/leo-editor/pWyd5ae952I/kvxf_H-QBq4J</a></p>
<p>Basically I can find interesting functions in LeoPyRef.leo but I don&#8217;t know
how to access them from my new leo scripts.</p>
<p>I don&#8217;t get the difference when I have to call them using g.Functionname(),
c.functionname(), or when those wont do.</p>
<p>How can I call the function &#8220;insertIconFromFile&#8221;?
How can I know how to call functions found in LeoPyRef.leo?</p>
<hr class="docutils" />
<p>Ok, in order to print icons, the code is this:</p>
<p>c.editCommands.insertIconFromFile(path)</p>
<p>I&#8217;m quoting from this Leo manual
<a class="reference external" href="http://leoeditor.com/scripting.html#important-objects">http://leoeditor.com/scripting.html#important-objects</a>,
<a class="reference external" href="http://leoeditor.com/scripting.html#inserting-and-deleting-icons">http://leoeditor.com/scripting.html#inserting-and-deleting-icons</a></p>
<p>Although I still have a mess on which functions can be called how, and
where to find the list of classes that can be called such as &#8220;editCommands&#8221;
and the rest that they might exist. Thanks!</p>
<p>I suppose you could say that there is no general solution, but the
situation isn&#8217;t really all that difficult.</p>
<p>Start with c. We know what that is: it is a commander object representing
an open outline.</p>
<p>There are <strong>official ivars</strong> of c, all referring to wrapper classes defined
in leoFrame.py:</p>
<div class="highlight-python"><div class="highlight"><pre>c.frame         an instance of leoFrame.
c.frame.tree    an instance of  leoTree.
c.frame.body    an instance of leoBody.
c.frame.log     an instance of leoLog.
</pre></div>
</div>
<p>The tree, body and log objects have a <em>wrapper</em> object</p>
<p>c.frame.tree.wrapper
c.frame.body.wrapper
c.frame.log.wrapper</p>
<p>See <a class="reference external" href="http://leoeditor.com/scripting.html#c-frame-body-bodyctrl">http://leoeditor.com/scripting.html#c-frame-body-bodyctrl</a> for a
description of the high-level text interface supported by all high-level
text widgets, including the log and body classes.</p>
<p>These wrapper classes have a widget ivar, which is a reference to the
corresponding Qt widget object.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>import PyQt4.QtGui as QtGui
w =3D c.frame.body.wrapper.widget
g.es(w)
g.es(isinstance(w,QtGui.QTextBrowser)
</pre></div>
</div>
<p>yields:</p>
<div class="highlight-python"><div class="highlight"><pre>(LeoQTextBrowser) 62418136
True
</pre></div>
</div>
<p>As shown, the LeoQTextBrowser class is a real (subclass of) QTextBrowser.</p>
<p>==== Terry</p>
<p>I&#8217;m not aware of a general solution to the problem of finding the various
pieces of Leo&#8217;s class structure. Basically there are all these classes
defined in the source, and instances of these are attached to each other in
a hierarchical network (with loops).</p>
<p>I&#8217;ve written an introspection function which lists the methods and instance
variables (and class variables) of an arbitrary object by name and by type.
I should release it. It builds its lists in a Leo outline, so you can
navigate around that outline and expand nodes by introspection as needed.</p>
<p>It occurs to me that the same code could be used to search Leo&#8217;s runtime
object hierarchy for you, i.e. you enter &#8216;insertIconFromFile&#8217; and it
recursively searches for it.</p>
<hr class="docutils" />
<p>I didn&#8217;t really finish the above para. The problem is that it&#8217;s hard to
guess what the names of the attachment points are, and the attaching is
done in a variety of places, sometimes by factory functions which further
obscure linkages. Not a fault with Leo, just the way programs work. So the
tool I&#8217;ve written may be the best approach to mapping Leo&#8217;s runtime
structure. Another thing it could do, try and map &#8216;major&#8217; classes, or at
least classes from leo.core.* - i.e. ignore the built in types.</p>
</div>
<div class="section" id="how-do-i-run-unit-tests-from-leo">
<h3><a class="toc-backref" href="#id41">How do I run unit tests from Leo?</a><a class="headerlink" href="#how-do-i-run-unit-tests-from-leo" title="Permalink to this headline">¶</a></h3>
<p>Leo makes it easy to create and run unit tests from individual outline
nodes or trees. A node whose headline starts with &#64;test defines a unit
test. The body text of the &#64;test node contains a <strong>self-contained</strong> unit
test. For example, this creates a complete unit test:</p>
<div class="highlight-python"><div class="highlight"><pre>@test fails  (headline)
assert False (body text)
</pre></div>
</div>
<p>To run this test, select the &#64;test node and do:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;alt-x&gt;run-selected-unit-tests-locally.
</pre></div>
</div>
<p>Leo will create and run the unit test automatically.</p>
<p>To see all of Leo&#8217;s unit testing commands, do:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;alt-x&gt;run&lt;tab&gt;
</pre></div>
</div>
<p>Leo pre-defines &#8216;c&#8217;, &#8216;g&#8217; and &#8216;p&#8217; in unit tests just as in scripts.</p>
<p>For more details about unit testing, see:
<a class="reference external" href="http://leoeditor.com/unitTesting.html">http://leoeditor.com/unitTesting.html</a></p>
<p><strong>Notes for Leo developers</strong></p>
<p>leo/test/unitTest.leo contains all of Leo&#8217;s own unit tests.</p>
<p>Running all tests is not necessary.  Just select:</p>
<div class="highlight-python"><div class="highlight"><pre>Active Unit Tests
</pre></div>
</div>
<p>and then do Alt-4 (run-selected-unit-tests-locally).</p>
<p><strong>Note</strong>: Some tests will likely fail on machines other than EKR&#8217;s. You
only need to be concerned about unit tests that start failing after you
make your changes.</p>
</div>
<div class="section" id="how-to-use-leo-to-make-mathematical-notes">
<h3><a class="toc-backref" href="#id42">How to use leo to make mathematical notes?</a><a class="headerlink" href="#how-to-use-leo-to-make-mathematical-notes" title="Permalink to this headline">¶</a></h3>
<p>If I want to use leo to make mathematical notes, how can I type in some
special mathematical symbols? Or is there a good way to make mathematical
notes using leo?</p>
<p>===== Terry</p>
<p>I use itex2MML with reStructuredText.  So within Leo you&#8217;re looking at
LaTeX math markup, and you get outputs in PDF and XHTML, with MathML in
the latter.</p>
<p>===== Jose</p>
<p>I&#8217;ve been doing this for about a year now.  I use the math docutils
directive.  A custom .XCompose file (for example:
<a class="reference external" href="https://github.com/kragen/xcompose">https://github.com/kragen/xcompose</a>)  also helps.</p>
<p>===== Terry</p>
<p>I think math was added to docutils after I started using itex2mml,
neater to use docutils built in math now I think.</p>
<p>Although having said that, playing with docutils math a bit suggests
itex2mml gives more complete support for both MathML and perhaps LaTeX
math (with the PDF target).</p>
<p>===== Jose</p>
<p>Terry, your setup is probably more flexible, but I haven&#8217;t had any problems with
docutils math. It seems to support all the syntax that I&#8217;ve found necessary.</p>
<p>I forgot to mention that the viewrendered plug-in doesn&#8217;t display math
correctly.  I&#8217;m not sure what the problem is, I remember trying to figure
it out a while back, but I never got anywhere.  It&#8217;s not really a big
problem though, I have scripts to compile nodes to html/pdfs and open them
in firefox/pdf reader; math works fine that way.</p>
<p>===== offray</p>
<p>Is not properly Leo, but is python related, tailored for math and with a
web interface and has leo bindings, check IPython:</p>
<p><a class="reference external" href="http://ipython.org/">http://ipython.org/</a></p>
<p>I&#8217;m using it for all my math related writing and I think that point the
future of interactive writing in Python. I dream of a body pane on leo
with the features of the python qt console.</p>
</div>
<div class="section" id="what-is-an-easy-way-to-profile-code">
<h3><a class="toc-backref" href="#id43">What is an easy way to profile code?</a><a class="headerlink" href="#what-is-an-easy-way-to-profile-code" title="Permalink to this headline">¶</a></h3>
<p>I had a need to figure out why a part of some python code I had written
was taking too long.</p>
<p>I pulled the code into Leo and the relevant part of the outline looked
something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>+ Main module
-- Generate cryptographic key
-- Hashing algorithm
</pre></div>
</div>
<p>etc. So I cloned just the segment I wanted to profile and pulled it under a new
section:</p>
<div class="highlight-python"><div class="highlight"><pre>+ Main module
-- [clone] Generate cryptographic key
-- Hashing algorithm

+ Profiling Experiment
-- [clone] Generate cryptographic key
</pre></div>
</div>
<p>And in the body of the &#8220;Profiling experiment&#8221;, I used this code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">code_under_here</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">@others</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">Timer</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="s">&quot;print my_key_generator()&quot;</span><span class="p">,</span> <span class="n">code_under_here</span><span class="p">)</span>
<span class="k">print</span> <span class="n">t</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">number</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>And then I hit Control-B to execute the Profiling Experiment body. This
let me make adjustments to the code in the clone body and keep hitting
Control-B to execute the code with the timeit module to see immediately
if what I had done was making a difference.</p>
<p>The great thing about this was that I just used the Leo &#64;others construct
to create a wrapper around the code and did not need to litter my code
with debug or profiling statements.&#8212;Kayvan</p>
</div>
</div>
<div class="section" id="tips-and-techniques">
<h2><a class="toc-backref" href="#id44">Tips and techniques</a><a class="headerlink" href="#tips-and-techniques" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-can-i-create-a-template-leo-file">
<h3><a class="toc-backref" href="#id45">How can I create a template .leo file?</a><a class="headerlink" href="#how-can-i-create-a-template-leo-file" title="Permalink to this headline">¶</a></h3>
<p><strong>Question</strong>:
It would be nice if Leo could open empty files. I tend to be &#8220;document oriented&#8221;
rather than &#8220;application oriented&#8221; in my thinking and prefer &#8220;create empty file
at location -&gt; open it with program&#8221; to &#8220;start program -&gt; create new file -&gt;
save it at location&#8221;.</p>
<p><strong>Answer</strong> by Paul Paterson:
If you are on Windows 98/2000/XP then the procedure is as follows...</p>
<ol class="arabic simple">
<li>Start Leo</li>
<li>Click New</li>
<li>Click Save as...</li>
<li>Save the file as &#8220;c:\windows\shellnew\leofile.leo&#8221; (or c:\winnt for 2000/XP)</li>
<li>Open regedit &#8220;start...run...regedit&#8221;</li>
<li>Open HKEY_CLASSES_ROOT and find the &#8221;.leo&#8221; extension type</li>
<li>Go New ... Key from the context menu</li>
<li>Call the new key ShellNew</li>
<li>Select the new key, right-click, choose New...String Value from the context menu</li>
<li>Call it FileName</li>
<li>Double-click on the string, and modify it to be the filename of the leofile.leo file you created,
including the extension</li>
<li>Exit the registry editor and restart Windows Explorer (you may need to reboot on Windows 98)</li>
</ol>
<p>Now you should have a New:Leo File option in Explorer. This creates a duplicate
of the file you saved. This can be useful because you could make a template Leo
file containing some standard <a class="reference external" href="glossary.html#nodes">nodes</a> that you always have and then save this.</p>
</div>
<div class="section" id="how-can-i-display-graphics-in-leo">
<h3><a class="toc-backref" href="#id46">How can I display graphics in Leo?</a><a class="headerlink" href="#how-can-i-display-graphics-in-leo" title="Permalink to this headline">¶</a></h3>
<p>One way is to link directly to the media file from a Leo <a class="reference external" href="glossary.html#node">node</a> (with &#64;url) and
write a script button to wrap all URL-nodes under the current <a class="reference external" href="glossary.html#node">node</a> in a single
HTML page. Then, you can view your media in two ways:</p>
<ul class="simple">
<li>Individually. You can directly click on the &#64;url link to display the media
in the browser (assuming you have your MIME/filetype associations set up
correctly for your browser).</li>
<li>In a group. You can click on a script button (you have to code this yourself,
very simple) which should collect all &#64;url <a class="reference external" href="glossary.html#nodes">nodes</a> under the current <a class="reference external" href="glossary.html#node">node</a>
and dynamically generate a HTML page displaying either links to or embedded
versions of the media (using the HTML trick described above to invoke the
browser). This way, you can create collections of &#64;url nodes under a
single <a class="reference external" href="glossary.html#node">node</a> (like a bookmark folder), and press a single button to view the
&#64;url collection as a single entity in the browser (with all browser
capabilities like displaying the media).</li>
</ul>
<p>You could probably generalize this idea of &#8220;collect all &#64;url nodes under current
<a class="reference external" href="glossary.html#node">node</a> and display as HTML in browser&#8221; into a general-purpose plugin. However,
the plugin would have to be somewhat smart in mapping a link to its corresponding
HTML code (e.g. an image link gets mapped to an &lt;img&gt; HTML tag, a link to a
Flash file gets mapped to an &lt;embed&gt; tag, etc).</p>
</div>
<div class="section" id="how-can-i-import-many-files-at-once">
<h3><a class="toc-backref" href="#id47">How can I import many files at once?</a><a class="headerlink" href="#how-can-i-import-many-files-at-once" title="Permalink to this headline">¶</a></h3>
<p>The Import Files dialog allows you to select multiple files provided you are running Python 2.3 or above.
There is also an importFiles script in LeoPy.leo.  You can use that script as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">leo.core.leoImport</span> <span class="kn">as</span> <span class="nn">leoImport</span>
<span class="n">leoImport</span><span class="o">.</span><span class="n">importFiles</span><span class="p">(</span><span class="n">aDirectory</span><span class="p">,</span> <span class="s">&quot;.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will import all .py files from aDirectory, which should be a full path to a particular directory.
You could use &#8221;.c&#8221; to import all .c files, etc.</p>
</div>
<div class="section" id="how-can-i-restore-focus-without-using-the-mouse">
<h3><a class="toc-backref" href="#id48">How can I restore focus without using the mouse</a><a class="headerlink" href="#how-can-i-restore-focus-without-using-the-mouse" title="Permalink to this headline">¶</a></h3>
<p>It sometimes happens that the focus gets left in a Leo
widget that doesn&#8217;t support Leo&#8217;s key bindings. You would
think that you would have to use the mouse to click in, say,
the body pane so that you can use Leo&#8217;s key bindings again.</p>
<p>But you don&#8217;t have to do that.  Instead, use Alt-tab once to change
away from Leo, and then use Alt-tab again to change back to Leo.  When
you do this, Leo puts focus in the body pane and you are all set.</p>
</div>
<div class="section" id="how-can-i-show-leo-files-with-excel">
<h3><a class="toc-backref" href="#id49">How can I show Leo files with Excel?</a><a class="headerlink" href="#how-can-i-show-leo-files-with-excel" title="Permalink to this headline">¶</a></h3>
<p>From: <a class="reference external" href="http://sourceforge.net/forum/message.php?msg_id=3240374">http://sourceforge.net/forum/message.php?msg_id=3240374</a>
Using Leo&#8217;s File-Export-Flatten Outline commands creates a MORE style outline which places
all Leo body sections on the left margin.
The <a class="reference external" href="glossary.html#headlines">headlines</a> are indented with tabs which Excel will read as a tab delimited format.
Once inside Excel there are benefits.</p>
<ol class="arabic">
<li><p class="first">The most obvious benefit inside Excel is that the body sections (Excel first
column) can be selected easily and highlighted with a different font color.
This makes the MORE format very readable. Save a copy of your sheet as HTML
and now you have a web page with the body sections highlighted.</p>
</li>
<li><p class="first">It is possible to hide columns in Excel.
Hiding the first column leaves just the headlines showing.</p>
</li>
<li><p class="first">Formulas based on searching for a string can do calculations in Excel.
For example if a heading &#8220;Current Assets&#8221; appears on level 4 then the body formula:</p>
<div class="highlight-python"><div class="highlight"><pre>=INDEX(A:A,MATCH(&quot;Current Assets&quot;,D:D,0)+1)
</pre></div>
</div>
<p>will retrieve it. The +1 after match looks down one row below the matched
headline. The trick is to place all your headlines in quotes because Excel
will see + &#8220;Current Assets&#8221; from the MORE outline. When Excel tries
without the quotes it thinks it is a range name and displays a #N/A
error instead of the headline. Also you must place a child <a class="reference external" href="glossary.html#node">node</a> below to
get the + sign instead of a - sign which would give a MORE headline of
-&#8220;Current assets&#8221; , also is an error.</p>
</li>
</ol>
<p>I think there is some interesting possibility here because of the enforcement of
Leo body text being always in the first column. The Leo outline provides
additional reference to organizing the problem not typical of spreadsheet
models. Beyond scripting in Python, Excel is good at doing interrelated
calculations and detecting problems like circular references. In Excel
Tools-Options-General is a setting for r1c1 format which then shows numbers
instead of letters for column references. Using this would allow entries like
this in the leo body:</p>
<div class="highlight-python"><div class="highlight"><pre>1000
3500
=R[-1]C+R[-2]C
</pre></div>
</div>
<p>In Excel you would see 4500 below those two numbers. This is completely
independent of where the block of three cells exists on the sheet.</p>
</div>
<div class="section" id="how-can-i-specify-the-root-directory-of-a-thumb-drive">
<h3><a class="toc-backref" href="#id50">How can I specify the root directory of a thumb drive?</a><a class="headerlink" href="#how-can-i-specify-the-root-directory-of-a-thumb-drive" title="Permalink to this headline">¶</a></h3>
<p>Use the %~dp0 syntax.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre>%~dp0\Python27\python.exe %~dp0\Leo-editor\launchLeo.py
</pre></div>
</div>
<p><a class="reference external" href="http://ss64.com/nt/syntax-args.html">http://ss64.com/nt/syntax-args.html</a>
<a class="reference external" href="http://stackoverflow.com/questions/5034076/what-does-dp0-mean-and-how-does-it-work">http://stackoverflow.com/questions/5034076/what-does-dp0-mean-and-how-does-it-work</a></p>
<p>FYI, this FAQ entry fixes the following bug:
<a class="reference external" href="https://bugs.launchpad.net/leo-editor/+bug/613153">https://bugs.launchpad.net/leo-editor/+bug/613153</a>
unable to describe root directory on thumb drive</p>
</div>
<div class="section" id="how-can-i-use-bibtex-citations-from-leo">
<h3><a class="toc-backref" href="#id51">How can I use BibTeX citations from Leo?</a><a class="headerlink" href="#how-can-i-use-bibtex-citations-from-leo" title="Permalink to this headline">¶</a></h3>
<p>When using LaTeX and BibTeX, I would like to use inside of Leo a kind of
LaTeX-inline-markup, that after generation of the RsT file through Sphinx
as well as after running of &#8220;make latex&#8221;, generate a LaTeX file containing
the citation call of the form cite{CITBook001} as described in a file
*.bib. Is there a way to have Leo/Sphinx/RsT generate the inline raw latex
syntax?</p>
<p>Use the docutils <a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/directives.html#raw-data-pass-through">raw-data</a> syntax. Examples:</p>
<div class="highlight-python"><div class="highlight"><pre>.. role:: raw-role(raw)
  :format: html latex
.. raw:: latex
  \bibliographystyle{acm}
  \bibliography{myBibliography}
</pre></div>
</div>
<p>For more details, see <a class="reference external" href="http://groups.google.com/group/leo-editor/browse_thread/thread/d36d76174dcd6786/9c2a298049f4f01c">this posting about BibTeX citations</a>.</p>
</div>
<div class="section" id="how-can-i-use-bzr-git-to-check-leo-s-importers">
<h3><a class="toc-backref" href="#id52">How can I use bzr/git to check Leo&#8217;s importers?</a><a class="headerlink" href="#how-can-i-use-bzr-git-to-check-leo-s-importers" title="Permalink to this headline">¶</a></h3>
<p>When I study a program, I like to import it into Leo. I have several
scripts that do this: some create &#64;auto nodes; others create &#64;file nodes.
Whatever the method used, the import process has the potential to change
many files. Usually, I just change &#64;auto and &#64;file to &#64;&#64;auto or &#64;&#64;file, so
that any changes I make while studying the code won&#8217;t affect the originals.</p>
<p>But this &#8220;safety first&#8221; approach means that I can&#8217;t actually use Leo to
insert tracing statements (or for any other changes.) Happily, there is a
way to import &#8220;live&#8221; code into Leo safely:</p>
<div class="highlight-python"><div class="highlight"><pre>Create a bzr repository for the code before importing it
</pre></div>
</div>
<p>The Aha is to create the repository <em>wherever the code is</em>, including,
say, python/Lib/site-packages.</p>
<ul class="simple">
<li>bzr qdiff ensures that import hasn&#8217;t significantly altered the code,</li>
<li>bzr revert undoes any unwise or unwanted changes.</li>
</ul>
<p>This is exactly what I need:  I can make changes to important tools
<em>safely</em> within Leo.</p>
</div>
<div class="section" id="how-can-i-use-leo-to-develop-leo-itself">
<h3><a class="toc-backref" href="#id53">How can I use Leo to develop Leo itself?</a><a class="headerlink" href="#how-can-i-use-leo-to-develop-leo-itself" title="Permalink to this headline">¶</a></h3>
<p>The trick is to create a workflow that separates editing from testing. Putting
test code in LeoPy.leo would waste a lot of time. To run tests you would
have to exit Leo and reload LeoPy.leo. A much quicker way is to put all test
code in a test.leo file. So to change and test code, do the following:</p>
<ol class="arabic simple">
<li>Save LeoPy.leo but do <strong>not</strong> exit Leo.</li>
<li>Quit the copy of Leo running test.leo, then reload test.leo.</li>
<li>Run test scripts from test.leo.</li>
</ol>
<p>That&#8217;s all. Python will recompile any changed .py files in the new copy of Leo.
<strong>Note</strong>: I create a batch file called t.bat that runs test.leo, so to the
&#8220;edit-reload-test&#8221; cycle is just:</p>
<ol class="arabic simple">
<li>Control-S (in LeoPy.leo: saves the .leo file)</li>
<li>t         (in a console window: runs test.leo, compiling all changed .py files as a side effect)</li>
<li>Control-E (in test.leo: runs the test script)</li>
</ol>
<p>The benefits of the new workflow:</p>
<ul class="simple">
<li>test.leo loads  _much_ more quickly than LeoPy.leo does.
This new approach can increase the speed of the edit-reload-test cycle by more than a factor of 10.
Hitting Control-S, t, Control-E takes about 5 seconds.</li>
<li>LeoPy.leo runs with the <em>old</em> code,
so it is much easier to fix syntax errors or exceptions in the <em>new</em> code:
just fix the problem and save LeoPy.leo <em>without</em> closing LeoPy.leo,
then restart test.leo.
You run your tests on the new code, but you edit the new code with the old, stable code.</li>
<li>test.leo is the perfect place to develop test.
I can create and organize those tests and when I am done, &#8216;&#8217;test.leo&#8217;&#8217; is a log of my work.</li>
</ul>
</div>
<div class="section" id="how-can-i-use-the-gtd-workflow-in-leo">
<h3><a class="toc-backref" href="#id54">How can I use the GTD workflow in Leo?</a><a class="headerlink" href="#how-can-i-use-the-gtd-workflow-in-leo" title="Permalink to this headline">¶</a></h3>
<p>GTD (Getting Things Done)
<a class="reference external" href="http://www.amazon.com/Getting-Things-Done-Stress-Free-Productivity/dp/0142000280">http://www.amazon.com/Getting-Things-Done-Stress-Free-Productivity/dp/0142000280</a>
is, by far, the best productivity book I have ever read. Many aspects of
Leo are idea for putting GTD into practice.</p>
<p>Here is a surprisingly useful workflow tip related to GTD.</p>
<p>Ideas often &#8220;intrude&#8221; when I am busy with something else. When that
happens, I create a top-level node of the form:</p>
<div class="highlight-python"><div class="highlight"><pre>** description of idea
</pre></div>
</div>
<p>Now I can continue what I was doing! This is such a simple idea, but it&#8217;s
really really important: it means I never have to put off getting my ideas
into Leo. The &#8220;**&#8221; draws my attention to the new to-do item. Later, when I
am not fully immersed in the previous task, I can put the &#8220;**&#8221; node
somewhere else.</p>
<p>It&#8217;s super important to deal with new ideas <em>instantly</em> but <em>without</em>
greatly interrupting the task at hand. Creating &#8220;**&#8221; nodes does that. This
new workflow has been a big improvement to my GTD practice.</p>
</div>
<div class="section" id="how-can-i-use-two-copies-of-leo-to-advantage">
<h3><a class="toc-backref" href="#id55">How can I use two copies of Leo to advantage?</a><a class="headerlink" href="#how-can-i-use-two-copies-of-leo-to-advantage" title="Permalink to this headline">¶</a></h3>
<p>By Rich Ries.
I often rework C code that&#8217;s already been &#8220;Leo-ized&#8221;&#8211;the first pass was quick
and dirty to get it going. When I do subsequent passes, I wind up with subnodes
that are out of order with the sequence found in the main <a class="reference external" href="glossary.html#node">node</a>. It&#8217;s not a big
deal, but I like &#8216;em ordered. With just one editor pane, clicking on the <a class="reference external" href="glossary.html#node">node</a> to
move would switch focus to that <a class="reference external" href="glossary.html#node">node</a>. I&#8217;d then need to re-focus on the main
<a class="reference external" href="glossary.html#node">node</a>. A minor nuisance, but it does slow you down.</p>
<p>My solution is to open a second editor with its focus on the main <a class="reference external" href="glossary.html#node">node</a>. Switch
to the other editor, and, referring to the first editor pane, move the nodes as
you like. The second editor&#8217;s pane will change focus to the <a class="reference external" href="glossary.html#node">node</a> you&#8217;re moving,
but the first editor will stay focused on the main <a class="reference external" href="glossary.html#node">node</a>. It&#8217;s a lot easier to
do than to describe!</p>
</div>
<div class="section" id="how-to-make-a-screencast">
<h3><a class="toc-backref" href="#id56">How to make a screencast</a><a class="headerlink" href="#how-to-make-a-screencast" title="Permalink to this headline">¶</a></h3>
<p>Making screencasts is a lot easier than you probably think.</p>
<p>Here are some tips to get you started quickly.</p>
<div class="section" id="use-a-script-to-open-your-app">
<h4><a class="toc-backref" href="#id57">Use a script to open your app</a><a class="headerlink" href="#use-a-script-to-open-your-app" title="Permalink to this headline">¶</a></h4>
<p>The primary purpose of this script is to open your app at a fixed,
unchanging size. This is surprisingly important:</p>
<ul class="simple">
<li>It ensures that the window will always render to pixels in the same way.</li>
<li>It makes it easier to splice in new video to an existing video.</li>
<li>It makes it easier to plan your video to ensure everything will appear as you expect.</li>
<li>It provides continuity when making a series of videos.</li>
</ul>
<p>Here is a script that I use when making Leo&#8217;s screencasts:</p>
<div class="highlight-python"><div class="highlight"><pre>python27 launchLeo.py --no-cache --gui=qttabs
--window-size=682x1264 &lt;list of .leo files&gt; %*​
</pre></div>
</div>
<p>This <em>particular</em> &#8211;window-size causes Camtasia to create a window whose
actual size is 720x1280, the nominal 720p resolution. It may prevent text
blur. Or not. I do know that Leo&#8217;s screencasts look great at 720p.</p>
</div>
<div class="section" id="debug-your-workflow-with-short-videos">
<h4><a class="toc-backref" href="#id58">Debug your workflow with short videos</a><a class="headerlink" href="#debug-your-workflow-with-short-videos" title="Permalink to this headline">¶</a></h4>
<p>Make sure that you can actually upload <em>excellent quality</em> videos before
doing anything else. This step is crucial. If you skip this step, all of
your initial recording an post-production work could be utterly wasted.</p>
<p>Use <em>short</em> (10-second) test videos at this step. Their primary purpose
verify that you can can get to the <em>end</em> of the production process
successfully. You <em>are</em> going to make lots of mistakes here: using short
videos helps you make these mistakes quickly.</p>
<p>Don&#8217;t even <em>think</em> about making longer videos until the answers to all the
following questions are clearly &#8220;yes&#8221;:</p>
<ul class="simple">
<li>Is your camera working?</li>
<li>Is your microphone working?</li>
<li>Do you know how to record your voice and screen?</li>
<li>Can you log into YouTube or screencast.com?</li>
<li>Can you upload to YouTube or screencast.com?</li>
<li>Is the sound in your <em>uploaded</em> video great?</li>
<li>Do the pixels in your <em>uploaded</em> look great?</li>
</ul>
<p>This last item is particularly important. Just because pixels look good in
your video editor is no guarantee that they will look good when uploaded.</p>
<p>You are ready to try your first &#8220;real&#8221; take <em>only</em> when you can upload a
video that looks and sounds great.</p>
</div>
<div class="section" id="emulate-the-screencast-com-tutorials">
<h4><a class="toc-backref" href="#id59">Emulate the screencast.com tutorials</a><a class="headerlink" href="#emulate-the-screencast-com-tutorials" title="Permalink to this headline">¶</a></h4>
<p>Before rushing right out and making your first video, I recommend
watching the tutorial screencasts at screencast.com:
<a class="reference external" href="http://www.techsmith.com/tutorial-camtasia-8.html">http://www.techsmith.com/tutorial-camtasia-8.html</a></p>
<p>Watch the tutorials to see how the presentations themselves are
organized. Watch them until it feels natural to emulate their style.</p>
<p>If you will be using Camtasia, you will also want to watch the tutorials
to learn how Camtasia works.  But this is a secondary consideration.</p>
</div>
<div class="section" id="record-your-first-real-take">
<h4><a class="toc-backref" href="#id60">Record your first real take</a><a class="headerlink" href="#record-your-first-real-take" title="Permalink to this headline">¶</a></h4>
<p>Now it&#8217;s time to go beyond test videos. Even now, though, I recommend
keeping your first efforts short: one minute or so. Again, this saves time.
You&#8217;ll ending up throwing away two or three anyway ;-)</p>
<p>Bring up your app using you demo script and run through your presentation.</p>
<p>Here&#8217;s the <strong>most important tip</strong>: As you narrate your video, audio flubs
are inevitable, but they don&#8217;t matter at all <em>provided</em> that you <em>realize</em>
that you have just flubbed a word or phrase.</p>
<p>When you flub a line, don&#8217;t panic! Just <em>pause</em>, regroup, and repeat the
phrase until you get it right. <em>Pausing is essential</em>: it simplifies
inserting and deleting sound bites during post production.</p>
<p>You&#8217;ll relax once you realize that flubs don&#8217;t matter and that pausing
makes post-production easier. Once you relax, getting a good take will
suddenly become easier.</p>
<p>Correcting flubs <em>as soon as they happen</em> is absolutely essential. Don&#8217;t
even <em>think</em> about fixing audio flubs in post-production. It simply can&#8217;t
be done. Instead of spending 20 minutes trying (and failing) to correct a
flub in post production, it is much faster and better to take 20 seconds
during your take to correct the flub.</p>
<p>Similar remarks apply to video, but in my experience it&#8217;s much easier to
get the video right. If you do flub the video, it will be much easier if
you just do a complete retake. With Camtasia, you can separate the audio
and video tracks, but usually that won&#8217;t work, especially if there is audio
of key clicks.</p>
<p>By retaking audio flubs as they happen, I find it easy to work without a
script. It feels more natural to me than reading a script. YMMV. When
I get stuck, I just pause. Or just start over. Otoh, it wouldn&#8217;t be that
hard to read a script. Just <em>pause</em> before and after each phrase. Never
rush your audio!</p>
<p>In short, the key Aha is: insert (audio) pauses <em>everywhere</em> as needed.
It&#8217;s easy to edit them out. It&#8217;s virtually impossible to edit in the middle
of words, even with the world&#8217;s best audio editor.</p>
</div>
<div class="section" id="edit-your-raw-take">
<h4><a class="toc-backref" href="#id61">Edit your raw take</a><a class="headerlink" href="#edit-your-raw-take" title="Permalink to this headline">¶</a></h4>
<p>Post production should be easy provided that you have corrected all audio
flubs as they happen. This keeps the audio and video in synch. Just edit
out flubs and reduce overly-long pauses.</p>
<p>I won&#8217;t discuss production details here because they depend on the editor
you are using.</p>
<p>Do a new take if you don&#8217;t have clean audio. Depending on the complexity of
your video, it may be possible to splice a partial take in the middle or
end of your video. Similarly, it may be possible to splice in a new take to
add material you didn&#8217;t cover in your first take.</p>
<p>One final word of advice. When editing your video, settle for &#8220;good
enough&#8221;. Perfectionism is not your friend.</p>
</div>
<div class="section" id="summary">
<h4><a class="toc-backref" href="#id62">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h4>
<p>Making a screencast is a lot easier than you think :-)</p>
<ul>
<li><p class="first">Create a script that will open your app at a fixed, optimal, size.</p>
</li>
<li><p class="first">Emulate the style and form of screencast.com tutorials.</p>
</li>
<li><p class="first">Verify the <em>entire</em> production process with short test videos.</p>
<p>Before making longer videos, make <em>sure</em> that the test videos look and
sound great <em>when they have been uploaded</em>.</p>
</li>
<li><p class="first">When doing a take, flubs don&#8217;t matter, <em>provided</em> you correct them
<em>during the take</em>.  Use pauses.  Make haste slowly!</p>
</li>
<li><p class="first">Splice in new takes during post-production to fix flubs and add new
material.</p>
</li>
</ul>
</div>
<div class="section" id="additional-tips">
<h4><a class="toc-backref" href="#id63">Additional tips</a><a class="headerlink" href="#additional-tips" title="Permalink to this headline">¶</a></h4>
<p>Here are some more tips I&#8217;ve learned from experience:</p>
<ol class="arabic simple">
<li>Redo audio tests and video tests every time you start a new
session. It&#8217;s amazing how hum can creep into recordings.</li>
<li>The most important step in post production is to get the pacing so
it feels right. Beware of editing out pauses. Make sure you give
your viewers time to see what you are doing, and to see what you
have done.</li>
<li>Don&#8217;t waste time on callouts or captions until the audio and video
work together at a relaxed pace. It&#8217;s almost as hard to correct
pacing mistakes as it is to correct audio flubs.</li>
</ol>
</div>
<div class="section" id="tips-for-improving-audio">
<h4><a class="toc-backref" href="#id64">Tips for improving audio</a><a class="headerlink" href="#tips-for-improving-audio" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>Enable volume leveling and noise removal in Camtasia. This tip, all
by itself, makes a big difference.</li>
<li>Use a better microphone, preferably one with about a 1-inch diaphram.
This is the kind of microphone that Andrew Price uses.
The Audio-technica AT2020 USB is relatively inexpensive.</li>
<li>Use &#8220;pop filter&#8221; with the microphone. This is a cloth or (better) a
metal screen that is placed in front of the microphone. It smooths
the sound.</li>
<li>Adjust the sound level for maximum volume without distortion: With
the microphone about a foot from your mouth, turn the volume as
loud as possible, then turn down until no red is visible in the
meter.</li>
</ol>
</div>
</div>
</div>
<div class="section" id="trouble-shooting">
<h2><a class="toc-backref" href="#id65">Trouble shooting</a><a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-get-help">
<h3><a class="toc-backref" href="#id66">How do I get help?</a><a class="headerlink" href="#how-do-i-get-help" title="Permalink to this headline">¶</a></h3>
<p>All questions are welcome at <a class="reference external" href="http://groups.google.com/group/leo-editor">http://groups.google.com/group/leo-editor</a></p>
</div>
<div class="section" id="how-do-i-report-bugs">
<h3><a class="toc-backref" href="#id67">How do I report bugs?</a><a class="headerlink" href="#how-do-i-report-bugs" title="Permalink to this headline">¶</a></h3>
<p>You can discuss possible bugs at
<a class="reference external" href="http://groups.google.com/group/leo-editor">http://groups.google.com/group/leo-editor</a></p>
<p>Please report bugs at
<a class="reference external" href="http://bugs.launchpad.net/leo-editor">http://bugs.launchpad.net/leo-editor</a></p>
<p>When reporting a bug, please include <em>all</em> of the following:</p>
<ul class="simple">
<li>The version of Leo used.</li>
<li>The version of Python used.</li>
<li>The platform or platforms used: Linux, Windows, MacOS.</li>
<li>A clear description of the problem.</li>
<li>Information sufficient to recreate the problem.</li>
</ul>
<p>It&#8217;s polite to make the bug report self contained, so that six weeks later
somebody will be able to understand the report as it stands.</p>
</div>
<div class="section" id="my-old-leo-files-won-t-load-using-leo-4-5-or-later-what-should-i-do">
<h3><a class="toc-backref" href="#id68">My old .leo files won&#8217;t load using Leo 4.5 or later. What should I do?</a><a class="headerlink" href="#my-old-leo-files-won-t-load-using-leo-4-5-or-later-what-should-i-do" title="Permalink to this headline">¶</a></h3>
<p>In version 4.5, Leo changed to using a sax parser for .leo files. This can cause
problems if your .leo file contains invalid characters.
Bugs in previous versions of Leo permitted these bad characters to appear.</p>
<p>The sax parser complains that these characters are not valid in .xml files.
Remove these invalid characters as follows:</p>
<ol class="arabic">
<li><p class="first"><a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>, and load the .leo file.
Near the bottom of the error message you will see a line like:</p>
<div class="highlight-python"><div class="highlight"><pre>SAXParseException: &lt;unknown&gt;:123:25: not well-formed (invalid token)
</pre></div>
</div>
<p>This line reports a bad character at character 25 of line 123.</p>
</li>
<li><p class="first">Open the .leo file in an external editor.
The Scite editor, <a class="reference external" href="http://www.scintilla.org/SciTE.html">http://www.scintilla.org/SciTE.html</a>,
is a good choice because it clearly shows non-printing characters.
Remove the invalid character, save the .leo file.</p>
</li>
</ol>
<p>Repeat steps 1 and 2 until all invalid characters are gone.</p>
</div>
<div class="section" id="error-messages-from-the-rst3-plugin-aren-t-helpful-what-can-i-do">
<h3><a class="toc-backref" href="#id69">Error messages from the rst3 plugin aren&#8217;t helpful. What can I do?</a><a class="headerlink" href="#error-messages-from-the-rst3-plugin-aren-t-helpful-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>For the most part, <a class="reference external" href="http://docutils.sourceforge.net/">docutils</a> does a good job of reporting errors. <a class="reference external" href="http://docutils.sourceforge.net/">docutils</a> prints
a message to the console and inserts an unmistakable error message in the
generated .html file.
<strong>Important</strong>: On Windows it is helpful to <a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>.</p>
<p>However, in some cases, <a class="reference external" href="http://docutils.sourceforge.net/">docutils</a> crashes instead of properly reporting the
problem. There are several workarounds:</p>
<ol class="arabic">
<li><p class="first">The crashes I have seen arise from the following bug in docutils.
<strong>Hyperlinks in image:: markup must be lower case</strong>.  This will work:</p>
<div class="highlight-python"><div class="highlight"><pre>.. .. |back| image:: arrow_lt.gif
    :target: faq_
</pre></div>
</div>
<p>This will <strong>crash</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>.. .. |back| image:: arrow_lt.gif
    :target: FAQ_
</pre></div>
</div>
<p>So avoid this crash by making sure to use lower case targets in &#8216;:target:&#8217; markup.</p>
</li>
<li><p class="first">You can change the <a class="reference external" href="http://docutils.sourceforge.net/">docutils</a> source slightly so that it prints a traceback when it
crashes. (The rst3 plugin should be able to do this, but I haven&#8217;t figured
out how yet.) It&#8217;s easy enough to do this:</p>
<ul>
<li><p class="first">Find the file core.py in top-level docutils folder.
Typically this folder will be in Python&#8217;s site-packages folder.</p>
</li>
<li><p class="first">Open core.py in some editor other than Leo.</p>
</li>
<li><p class="first">Find the method called report_Exceptions.</p>
</li>
<li><p class="first">Insert the following lines at the very start of this method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&#39;EKR: added traceback&#39;</span>
<span class="kn">import</span> <span class="nn">traceback</span> <span class="p">;</span> <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
<p>This will cause a traceback whenever <a class="reference external" href="http://docutils.sourceforge.net/">docutils</a> crashes. I have found that
such tracebacks are generally enough to locate the general area of the
problem. <strong>Note</strong>: These tracebacks go to the console window, so you should
<a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>.</p>
</li>
<li><p class="first">As a last resort, you can isolate syntax errors by reducing your input files
until they work again, then adding sections until you get a crash. This is
easy enough to do (when using the rst3 plugin) by change a headline &#8216;x&#8217; to
&#64;rst-ignore-tree x.</p>
</li>
</ol>
</div>
<div class="section" id="how-can-i-run-leo-from-a-console-window">
<h3><a class="toc-backref" href="#id70">How can I run Leo from a console window?</a><a class="headerlink" href="#how-can-i-run-leo-from-a-console-window" title="Permalink to this headline">¶</a></h3>
<p>Leo (and other programs) often send more detailed error messages to stderr,
the output stream that goes to the console window. In Linux and MacOS
environments, python programs normally execute with the console window visible.
On Windows, can run Leo with the console window visible by associating .leo
files with python.exe <em>not</em> pythonw.exe.</p>
</div>
<div class="section" id="how-can-i-use-python-s-pdb-debugger-with-leo">
<h3><a class="toc-backref" href="#id71">How can I use Python&#8217;s pdb debugger with Leo?</a><a class="headerlink" href="#how-can-i-use-python-s-pdb-debugger-with-leo" title="Permalink to this headline">¶</a></h3>
<p>Just <a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>. At the point you want to drop into the
debugger, execute this line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">pdb</span><span class="p">()</span>
</pre></div>
</div>
<p>All output from pdb goes to stdout, which is the console window. It would be
good to create a subclass of pdb.Pdb that uses Leo&#8217;s log pane rather than a
console window, but I haven&#8217;t done that. It could be done easily enough in a
plugin...</p>
<p><strong>Important</strong>: I recommend using g.trace instead of pdb.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>prints the name of the function or method containing the trace, and the value of
x. g.callers is often useful in combination with g.trace. g.callers(5)
returns the last 5 entries of the call stack. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">callers</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>Used this way, g.trace shows you patterns that will be invisible using pdb.</p>
</div>
<div class="section" id="i-can-t-write-imported-files-what-s-going-on">
<h3><a class="toc-backref" href="#id72">I can&#8217;t write Imported files.  What&#8217;s going on?</a><a class="headerlink" href="#i-can-t-write-imported-files-what-s-going-on" title="Permalink to this headline">¶</a></h3>
<p>The import commands insert &#64;ignore <a class="reference external" href="glossary.html#directives">directives</a> in the top-level <a class="reference external" href="glossary.html#node">node</a>.
Leo does this so that you won&#8217;t accidentally overwrite your files after importing them.
Change the filename following &#64;file (or &#64;file) as desired,
then remove the &#64;ignore <a class="reference external" href="glossary.html#directive">directive</a>.
Saving the outline will then create the external file.</p>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id73">Nothing (or almost nothing) happens when I start Leo.  What should I do?</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Missing modules can cause installation problems.
If the installer doesn&#8217;t work (or puts up a dialog containing no text), you may install Leo from the .zip file
as described at <a class="reference external" href="installing.html#installing-leo-on-windows">How to install Leo on Windows</a>.
However you are installing Leo,
be sure to <a class="reference external" href="running.html#running-leo-from-a-console-window">run Leo in a console window</a>.
because as a last resort Leo prints error messages to the console.</p>
</div>
<div class="section" id="the-new-python-decorator-syntax-causes-problems-what-can-i-do">
<h3><a class="toc-backref" href="#id74">The new Python decorator syntax causes problems.  What can I do?</a><a class="headerlink" href="#the-new-python-decorator-syntax-causes-problems-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>Python&#8217;s <a class="reference external" href="http://www.python.org/peps/pep-0318.html">decorator</a> syntax is ill-conceived.
This syntax file hack works well enough anyway to work with Leo &#8216;&#64;&#8217; markup:</p>
<div class="highlight-python"><div class="highlight"><pre>syn region leoComment start=&quot;^@\\s*&quot; end=&quot;^@c\\s*$&quot;
syn match   pythonDecorator &quot;@\\S\\S+&quot; display nextgroup=pythonFunction skipwhite
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id75">Running Python setup.py install from the leo directory doesn&#8217;t work.  Why not?</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Leo&#8217;s setup.py script is intended only to create source distributions. It can&#8217;t
be used to install Leo because Leo is not a Python package.</p>
</div>
<div class="section" id="i-can-t-run-the-leobridge-module-outside-of-leo-core-what-should-i-do">
<h3><a class="toc-backref" href="#id76">I can&#8217;t run the LeoBridge module outside of leo/core.  What should I do?</a><a class="headerlink" href="#i-can-t-run-the-leobridge-module-outside-of-leo-core-what-should-i-do" title="Permalink to this headline">¶</a></h3>
<p>Question and answer from plumloco.</p>
<p>Add the equivalent of:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">leocore</span> <span class="o">=</span> <span class="s">&quot;path/to/leo/core&quot;</span>
<span class="k">if</span> <span class="n">leocore</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leocore</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">leo.core.leoBridge</span> <span class="kn">as</span> <span class="nn">leoBridge</span>
</pre></div>
</div>
<p>at the head of each file that uses leoBridge.</p>
<p>The problem is not importing leoBridge itself but (if I use &#8216;from leo.core&#8217;) the
importing of plugins, who get a different leoGlobals from leoBridge, without
g.app etc, and so do not work if they rely on dynamic values in g.etc.</p>
<p>&gt; Why can&#8217;t you simply add leo/core to sys.path in sitecustomize.py?</p>
<p>Putting leo/core on the python path as you suggest would put forty python modules
in the global module namespace for all python programs when I want just one.
Also, I have a safe working copy of leo and a cvs/testing version. I would wish
to test any programs against the testing version while using the working
version, but both /core directories can&#8217;t be exposed at the same time.</p>
<p>&gt; Do you need plugins while running from the leoBridge?</p>
<p>Afraid so, at least the rst3 plugin. The solution I am using now is to place:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s">&#39;leoGlobals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">leoGlobals</span>
</pre></div>
</div>
<p>in leoBridge after import leo.core.leoGlobals as leoGlobals</p>
<p>This allows my scripts
to be portable over the several computers/platforms I need to use them on, and
makes testing scripts against multiple leo versions easy. It does mean that my
scripts are not portable to other leo users but that is not likely to be a
problem.</p>
</div>
<div class="section" id="why-didn-t-leo-update-my-shadow-outline-as-expected">
<h3><a class="toc-backref" href="#id77">Why didn&#8217;t Leo update my &#64;shadow outline as expected?</a><a class="headerlink" href="#why-didn-t-leo-update-my-shadow-outline-as-expected" title="Permalink to this headline">¶</a></h3>
<p>The &#64;shadow algorithm guarantees <em>only</em> that writing an updated &#64;shadow
outline will generate the updated <strong>public</strong> file. There is <em>no way</em> to
guarantee that the updated outline structure will be as expected. The
&#64;shadow algorithm can not guess between two or more ways of updating the
<strong>private</strong> file when each of the ways yields the same <strong>public</strong> file.</p>
<p>Happily, this &#8220;fact of life&#8221; about &#64;shadow is not serious. If you don&#8217;t like
the &#8220;guesses&#8221; that the &#64;shadow algorithm has made, you can simply change the
&#64;shadow tree. After saving the outline, the <em>private</em> file will record your
choice. The next time you open the outline, you will see the choices <em>you</em> made,
not the guesses that the &#64;shadow algorithm made.</p>
</div>
<div class="section" id="why-do-qt-windows-disappear-in-my-scripts">
<h3><a class="toc-backref" href="#id78">Why do Qt windows disappear in my scripts?</a><a class="headerlink" href="#why-do-qt-windows-disappear-in-my-scripts" title="Permalink to this headline">¶</a></h3>
<p>Q. When I run the following script I see a window appear and then
immediately disappear:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
<span class="n">w</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">&#39;Simple test&#39;</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>What&#8217;s going on?</p>
<p>A. When the script exits the sole reference to the window, w, ceases to
exist, so the window is destroyed (garbage collected). To keep the window
open, add the following code as the last line to keep the reference alive:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">scriptsDict</span><span class="p">[</span><span class="s">&#39;my-script_w&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
</pre></div>
</div>
<p>Note that this reference will persist until the next time you run the
execute-script. If you want something even more permanent, you can do
something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">my_script_w</span> <span class="o">=</span> <span class="n">w</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="unicode-issues">
<h2><a class="toc-backref" href="#id79">Unicode issues</a><a class="headerlink" href="#unicode-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="i-can-not-enter-non-ascii-characters-what-can-i-do">
<h3><a class="toc-backref" href="#id80">I can not enter non-ascii characters.  What can I do?</a><a class="headerlink" href="#i-can-not-enter-non-ascii-characters-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>Set &#64;bool ignore_unbound_non_ascii_keys = False in LeoSettings.leo or myLeoSettings.leo.</p>
</div>
<div class="section" id="some-characters-in-external-files-look-funny-what-can-i-do">
<h3><a class="toc-backref" href="#id81">Some characters in external files look funny. What can I do?</a><a class="headerlink" href="#some-characters-in-external-files-look-funny-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>Internally, Leo represents all strings as unicode. Leo translates from a
particular encoding to <a class="reference external" href="http://www.unicode.org/">Unicode</a> when reading .leo files or external files. Leo
translates from <a class="reference external" href="http://www.unicode.org/">Unicode</a> to a particular encoding when writing external files.
You may see strange looking characters if your text editor is expecting a
different encoding. The encoding used in any external file is shown in the
<a class="reference external" href="mailto:#&#37;&#52;&#48;+leo">#<span>&#64;</span>+leo</a> sentinel line like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#@+leo-encoding=iso-8859-1.</span>
</pre></div>
</div>
<p><strong>Exception</strong>: the encoding is UTF-8 if no -encoding= field exists.
You can also use the &#64;encoding <a class="reference external" href="glossary.html#directive">directive</a> to set the encoding for individual external files.
If no &#64;encoding <a class="reference external" href="glossary.html#directive">directive</a> is in effect,
Leo uses the following <a class="reference external" href="glossary.html#settings">settings</a> to translate to and from unicode:</p>
<dl class="docutils">
<dt>default_derived_file_encoding</dt>
<dd>The encoding used for external files if no &#64;encoding <a class="reference external" href="glossary.html#directive">directive</a> is in effect.
This setting also controls the encoding of files that Leo writes.
The default is UTF-8 (case not important).</dd>
<dt>new_leo_file_encoding</dt>
<dd><p class="first">The encoding specified in the following line of new .leo files:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&gt;
</pre></div>
</div>
<p class="last">The default is UTF-8 (upper case for compatibility for old versions of Leo).</p>
</dd>
</dl>
</div>
<div class="section" id="i-get-weird-results-when-defining-unicode-strings-in-scripts-what-is-going-on">
<h3><a class="toc-backref" href="#id82">I get weird results when defining unicode strings in scripts.  What is going on?</a><a class="headerlink" href="#i-get-weird-results-when-defining-unicode-strings-in-scripts-what-is-going-on" title="Permalink to this headline">¶</a></h3>
<p>Add the following to the start of your scripts:</p>
<div class="highlight-python"><div class="highlight"><pre>@first # -*- coding: utf-8 -*-
</pre></div>
</div>
<p>Without this line, constructs such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">u</span> <span class="o">=</span> <span class="s">u&#39;a-(2 unicode characters here)-z&#39;</span>
<span class="n">u</span> <span class="o">=</span> <span class="s">&#39;a-(2 unicode characters here)-z&#39;</span>
</pre></div>
</div>
<p>will not work when executed with Leo&#8217;s execute script command.
Indeed, the Execute Script command creates the script by writing the tree
containing the script to a string. This is done using Leo&#8217;s write logic, and
this logic converts the unicode input to a utf-8 encoded string. So <em>all
non-ascii characters</em> get converted to their equivalent in the utf-8 encoding.
Call these encoding &lt;e1&gt; and &lt;e2&gt;. In effect the script becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">u</span> <span class="o">=</span> <span class="s">u&#39;a-&lt;e1&gt;-&lt;e2&gt;-z&#39;</span>
<span class="n">u</span> <span class="o">=</span> <span class="s">&#39;a-&lt;e2&gt;-&lt;e&gt;-z&#39;</span>
</pre></div>
</div>
<p>which is certainly <em>not</em> what the script writer intended!
Rather than defining strings using actual characters, Instead, one should use
the equivalent escape sequences. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">u</span> <span class="o">=</span> <span class="s">u&#39;a-</span><span class="se">\\</span><span class="s">u0233-</span><span class="se">\\</span><span class="s">u8ce2-z&#39;</span>
<span class="n">u</span> <span class="o">=</span> <span class="s">&#39;a-</span><span class="se">\\</span><span class="s">u0233-</span><span class="se">\\</span><span class="s">u8ce2-z&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="some-characters-are-garbled-when-importing-files-what-can-i-do">
<h3><a class="toc-backref" href="#id83">Some characters are garbled when importing files. What can I do?</a><a class="headerlink" href="#some-characters-are-garbled-when-importing-files-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>The encoding used in the file being imported doesn&#8217;t match the encoding in effect for Leo.
You have two options:</p>
<ul class="simple">
<li>Use the &#64;encoding <a class="reference external" href="glossary.html#directive">directive</a> in an ancestor of the <a class="reference external" href="glossary.html#node">node</a> selected when
doing the Import <a class="reference external" href="commands.html">command</a> to specify the encoding of file to be imported.</li>
</ul>
</div>
<div class="section" id="python-s-print-statement-shows-byte-hash-for-unicode-characters-what-can-i-do">
<h3><a class="toc-backref" href="#id84">Python&#8217;s print statement shows &#8216;byte hash&#8217; for unicode characters.  What can I do?</a><a class="headerlink" href="#python-s-print-statement-shows-byte-hash-for-unicode-characters-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p>First, you must change Python&#8217;s default encoding to something other than &#8216;ascii&#8217;.  To do this, put the following in your sitecustomize.py file in Python&#8217;s Lib folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span> <span class="c"># &#39;iso-8859-1&#39; is another choice.</span>
</pre></div>
</div>
<p>You must restart Python after doing this: sys.setdefaultencoding can not be called after Python starts up.</p>
<p>Leo&#8217;s g.es_print and g.pr functions attempts to convert incoming arguments to unicode using the default encoding.
For example, the following Leo script shows various ways of printing La Peña properly:</p>
<div class="highlight-python"><div class="highlight"><pre>@first # -*- coding: utf-8 -*-

import sys
e = sys.getdefaultencoding()
print &#39;encoding&#39;,e
table = (
    &#39;La Peña&#39;,
    unicode(&#39;La Peña&#39;,&#39;utf-8&#39;),
    u&#39;La Peña&#39;,
    u&#39;La Pe\\xf1a&#39;,
)

for s in table:
    print type(s)
    g.es_print(&#39;g.es_print&#39;,s)
    if type(s) != type(u&#39;a&#39;):
        s = unicode(s,e)
    print &#39;print     &#39;,s
    print &#39;repr(s)   &#39;,repr(s)
</pre></div>
</div>
<p>For still more details, see:
<a class="reference external" href="http://www.diveintopython.org/xml_processing/unicode.html">http://www.diveintopython.org/xml_processing/unicode.html</a></p>
</div>
</div>
<div class="section" id="using-external-files">
<h2><a class="toc-backref" href="#id85">Using external files</a><a class="headerlink" href="#using-external-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-inhibit-sentinels-in-external-files">
<h3><a class="toc-backref" href="#id86">How do I inhibit sentinels in external files?</a><a class="headerlink" href="#how-do-i-inhibit-sentinels-in-external-files" title="Permalink to this headline">¶</a></h3>
<p>You have two options, depending on whether you want to be able to use sections
or not.</p>
<ul class="simple">
<li>Use &#64;nosent trees.
Files derived from &#64;nosent trees contain no <a class="reference external" href="glossary.html#sentinels">sentinels</a>.
However, Leo create the external file just as in &#64;file trees.
In particular, Leo expands section references and understands the &#64;others directive.</li>
<li>Use &#64;asis trees.
Files derived from &#64;asis trees contain no <a class="reference external" href="glossary.html#sentinels">sentinels</a>.
Moreover, Leo does not expand section references in asis trees.
In other words, Leo creates the <cite>external file</cite> simply by writing all body text in outline order.
Leo can&#8217;t update the outline unless the external file contains sentinels,
so Leo does not update &#64;nosent trees or &#64;asis trees automatically when
you change the external file in an external editor.</li>
</ul>
</div>
<div class="section" id="how-do-i-prevent-leo-from-expanding-sections">
<h3><a class="toc-backref" href="#id87">How do I prevent Leo from expanding sections?</a><a class="headerlink" href="#how-do-i-prevent-leo-from-expanding-sections" title="Permalink to this headline">¶</a></h3>
<p>Use &#64;asis trees. Files derived from &#64;asis trees contain no sentinels. Leo
creates the external file simply by writing all body text in outline order. Leo
can&#8217;t update the outline unless the external file contains sentinels, so Leo
does not update &#64;asis trees automatically when you change the external file in
an external editor.</p>
</div>
<div class="section" id="how-can-i-create-javascript-comments">
<h3><a class="toc-backref" href="#id88">How can I create Javascript comments?</a><a class="headerlink" href="#how-can-i-create-javascript-comments" title="Permalink to this headline">¶</a></h3>
<p><strong>Question</strong>: I&#8217;m writing a Windows Script Component, which is an XML file with
a CData section containing javascript. I can get the XML as I want it by using
&#64;language html, but how can I get the tangling comments inside the CData
section to be java-style comments rather than html ones?</p>
<p><strong>Answer</strong>: In &#64;file trees you use the &#64;delims directive to change comment delimiters.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>@delims /* */
Javascript stuff
@delims &lt;-- --&gt;
HTML stuff
</pre></div>
</div>
<p><strong>Important</strong>: Leo can not revert to previous delimiters automatically;
you must change back to previous delimiters using another &#64;delims <a class="reference external" href="glossary.html#directive">directive</a>.</p>
</div>
<div class="section" id="how-can-i-disable-php-comments">
<h3><a class="toc-backref" href="#id89">How can I disable PHP comments?</a><a class="headerlink" href="#how-can-i-disable-php-comments" title="Permalink to this headline">¶</a></h3>
<p>By Zvi Boshernitzan: I was having trouble disabling &#8216;&lt;?php&#8217; with comments (and
couldn&#8217;t override the comment character for the start of the page). Finally, I
found a solution that worked, using php&#8217;s heredoc string syntax:</p>
<div class="highlight-python"><div class="highlight"><pre>@first &lt;?php
@first $comment = &lt;&lt;&lt;EOD
EOD;

// php code goes here.
echo &quot;boogie&quot;;

$comment2 = &lt;&lt;&lt;EOD
@last EOD;
@last ?&gt;
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre>@first &lt;?php
@first /*
*/

echo &quot;hi&quot;;

@delims /* */
@last ?&gt;
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-use-leo-with-unsupported-languages">
<h3><a class="toc-backref" href="#id90">How can I use Leo with unsupported languages?</a><a class="headerlink" href="#how-can-i-use-leo-with-unsupported-languages" title="Permalink to this headline">¶</a></h3>
<p>Here is a posting which might be helpful:
<a class="reference external" href="http://sourceforge.net/forum/message.php?msg_id=2300457">http://sourceforge.net/forum/message.php?msg_id=2300457</a> The &#64;first
<a class="reference external" href="glossary.html#directive">directive</a> is the key to output usable code in unsupported languages. For
example, to use Leo with the Basic language, use the following:</p>
<div class="highlight-python"><div class="highlight"><pre>@first $IFDEF LEOHEADER
@delims &#39;
@c
$ENDIF
</pre></div>
</div>
<p>So this would enable a basic compiler to &#8220;jump&#8221; over the &#8220;true&#8221; Leo-header-lines.
Like this:</p>
<div class="highlight-python"><div class="highlight"><pre>$IFDEF LEOHEADER &lt;-conditional compilation directive
#@+leo-ver=4 &lt;-these lines not compiled
#@+node:@file QParser005.INC
#@@first
#@delims &#39;
&#39;@@c
$ENDIF &lt;-... Until here!
&lt;rest of derived code file ... &gt;
</pre></div>
</div>
<p>This changes the comment symbol the apostrophe,
making comments parseable by a BASIC (or other language.)</p>
</div>
<div class="section" id="how-do-i-make-external-files-start-with-a-shebang-line">
<h3><a class="toc-backref" href="#id91">How do I make external files start with a shebang line?</a><a class="headerlink" href="#how-do-i-make-external-files-start-with-a-shebang-line" title="Permalink to this headline">¶</a></h3>
<p>Use the &#64;first <a class="reference external" href="glossary.html#directive">directive</a> in &#64;file trees or &#64;nosent trees.</p>
<p>The &#64;first directive puts lines at the very start of files derived from &#64;file.
For example, the body text of &#64;file spam.py might be:</p>
<div class="highlight-python"><div class="highlight"><pre>@first #! /usr/bin/env python
</pre></div>
</div>
<p>The body text of &#64;file foo.pl might be:</p>
<div class="highlight-python"><div class="highlight"><pre>@first #/usr/bin/perl
</pre></div>
</div>
<p>Leo recognizes the &#64;first <a class="reference external" href="glossary.html#directive">directive</a> only at the start of the body text of &#64;file nodes.
No text may precede &#64;first <a class="reference external" href="glossary.html#directives">directives</a>.
More than one &#64;first directive may exist, like this:</p>
<div class="highlight-python"><div class="highlight"><pre>@first #! /usr/bin/env python
@first # more comments.
</pre></div>
</div>
</div>
<div class="section" id="can-file-trees-contain-material-not-in-the-external-file">
<h3><a class="toc-backref" href="#id92">Can &#64;file trees contain material not in the external file?</a><a class="headerlink" href="#can-file-trees-contain-material-not-in-the-external-file" title="Permalink to this headline">¶</a></h3>
<p>No. Everything in an &#64;file trees must be part of the external file: orphan and
&#64;ignore nodes are invalid in &#64;file trees. This restriction should not be
troublesome. For example, you can organize your outline like this:</p>
<div class="highlight-python"><div class="highlight"><pre>+ myClass
..+ ignored stuff
..+ @file myClass
</pre></div>
</div>
<p>(As usual, + denotes a headline.) So you simply create a new <a class="reference external" href="glossary.html#node">node</a>, called
myClass, that holds your &#64;file trees and stuff you don&#8217;t want in the &#64;file
trees.</p>
</div>
<div class="section" id="how-can-i-use-leo-with-older-c-compilers">
<h3><a class="toc-backref" href="#id93">How can I use Leo with older C compilers</a><a class="headerlink" href="#how-can-i-use-leo-with-older-c-compilers" title="Permalink to this headline">¶</a></h3>
<p>By Rich Ries.
Some older C compilers don&#8217;t understand the &#8220;//&#8221; comment symbol, so using &#64;language C won&#8217;t work.
Moreover, the following does not always work either:</p>
<div class="highlight-python"><div class="highlight"><pre>@comment /* */
</pre></div>
</div>
<p>This generates the following sentinel line:</p>
<div class="highlight-python"><div class="highlight"><pre>/*@@comment /* */*/
</pre></div>
</div>
<p>in the output file, and not all C compilers allow nested comments, so the last */ generates an error.
The solution is to use:</p>
<div class="highlight-python"><div class="highlight"><pre>#if 0
@comment /* */
#endif
</pre></div>
</div>
<p>Leo is happy: it recognizes the &#64;comment <a class="reference external" href="glossary.html#directive">directive</a>.
The C compiler is happy: the C preprocessor strips out the offending line before the C
compiler gets it.</p>
</div>
<div class="section" id="why-can-t-i-use-ignore-directives-in-file-trees">
<h3><a class="toc-backref" href="#id94">Why can&#8217;t I use &#64;ignore directives in &#64;file trees?</a><a class="headerlink" href="#why-can-t-i-use-ignore-directives-in-file-trees" title="Permalink to this headline">¶</a></h3>
<p>The &#64;ignore directive can not be used elsewhere in &#64;file trees because of the way Leo recreates
outlines from external files. This is an absolutely crucial restriction and will never go away.
For a few more details, see <a class="reference external" href="appendices.html#leo-4-0-eliminating-error-recovery">Leo 4.0: Eliminating error &#8216;recovery&#8217;</a> in <a class="reference external" href="appendices.html#history-of-leo">History of Leo</a>.</p>
<p>There are several workaround, as shown in LeoPy.leo:</p>
<ul class="simple">
<li>keep notes in the outline outside of any external file.</li>
<li>Use &#64;all to gather notes in a external file, as in done in &#64;file leoProjects.txt.</li>
</ul>
</div>
<div class="section" id="how-can-i-avoid-getting-long-lines-in-external-files">
<h3><a class="toc-backref" href="#id95">How can I avoid getting long lines in external files?</a><a class="headerlink" href="#how-can-i-avoid-getting-long-lines-in-external-files" title="Permalink to this headline">¶</a></h3>
<p><strong>Question</strong>: I must follow a coding standard when writing source code. It
includes a maximum line length restriction. How can I know the length of a
line when it gets written to the external file?</p>
<p><strong>Answer</strong>: If a node belongs to a external file hierarchy, its body might get
indented when it is written to the external file. It happens when an
&#64;others directive or a section name appears indented in a higher-level
node body. While (<strong>line</strong>, <strong>col</strong>) in status area show the line and column
containing the body text&#8217;s cursor, <strong>fcol</strong> shows the cursor coordinate
relative to the external file, not to the current node. The relation
<strong>fcol &gt;= col</strong> is always true.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="contents.html">
              <img class="logo" src="_static/Leo4-80-border.jpg" alt="Logo"/>
            </a></p>
<h3><a href="contents.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Leo’s Home Page</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="preliminaries.html">Preliminaries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Downloading, Installing &amp; Running Leo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheat Sheet</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="screencasts.html">Videos about Leo</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="usersguide.html">Users Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="leoandotherprograms.html">Leo and Other Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="intermediatetopics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="apidoc/index.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="what-is-new.html">What&#8217;s New</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><!--@+leo-ver=5-thin-->
<!--@+node:davy.20141209091210.2: * @file sources/templates/flattrSidebar.html-->
<!--@@language html-->
<!--@@tabwidth -4-->
<p>Leo: Leonine Editor with Outlines</p>
<p>
Written by <a HREF="ekr.html">Edward K. Ream</a>
<a class="FlattrButton" style="display:none;" rev="flattr;button:compact;" href="http://leoeditor.com"></a>
<noscript>
<a href="http://flattr.com/thing/410073/Leo" target="_blank">
<img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" />
</a>
</noscript>
</p>
<!--@-leo-->
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >next</a> |</li>
        <li class="right" >
          <a href="apidoc/leo.core.leoApp.LeoApp.createDefaultGui.html" title="leo.core.leoApp.LeoApp.createDefaultGui"
             >previous</a> |</li>
        <li><a href="contents.html">Leo 5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Edward K. Ream.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>